import{r as n,j as r,B as Ae,v as It,s as we}from"./index-BNIGZ_sb.js";import{g as Me,D as Tt,d as Et,a as Pt,b as _t,c as Nt,e as Rt}from"./scroll-area-DaoqWUtW.js";import{c as Oe,A as Le,m as jt,u as be,B as kt,a as Be,b as Re,Z as Mt,E as Dt,d as M,e as X,F as At,_ as Ot,X as Lt,G as Bt,J as Ft,H as Vt,K as Ht,L as Ut,M as zt,N as Kt,$ as Fe,P as Wt,a0 as $t,S as qt,o as Gt,p as Yt,q as Qt,r as Xt,s as Zt,a1 as Jt}from"./dropdown-menu-CE0Hsqy3.js";import{u as W,P as O,d as eo,c as oe,B as Ce}from"./index-CnYdjC-F.js";import{u as Ve,s as He,h as ye,g as De}from"./zod-CBN5pmrC.js";import{u as Ie}from"./useMutation-Bi3RyDN5.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ue=Oe("chevron-down",to);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ro=Oe("chevron-up",oo);function ze(t){const o=n.useRef({value:t,previous:t});return n.useMemo(()=>(o.current.value!==t&&(o.current.previous=o.current.value,o.current.value=t),o.current.previous),[t])}var no=[" ","Enter","ArrowUp","ArrowDown"],so=[" ","Enter"],re="Select",[pe,fe,ao]=Mt(re),[ce,Zo]=Be(re,[ao,Le]),he=Le(),[co,Z]=ce(re),[io,lo]=ce(re),Ke=t=>{const{__scopeSelect:o,children:e,open:c,defaultOpen:d,onOpenChange:s,value:a,defaultValue:l,onValueChange:i,dir:p,name:v,autoComplete:w,disabled:y,required:C,form:m}=t,u=he(o),[h,S]=n.useState(null),[f,g]=n.useState(null),[N,D]=n.useState(!1),Y=jt(p),[k,V]=be({prop:c,defaultProp:d??!1,onChange:s,caller:re}),[H,U]=be({prop:a,defaultProp:l,onChange:i,caller:re}),R=n.useRef(null),j=h?m||!!h.closest("form"):!0,[z,L]=n.useState(new Set),B=Array.from(z).map(A=>A.props.value).join(";");return r.jsx(kt,{...u,children:r.jsxs(co,{required:C,scope:o,trigger:h,onTriggerChange:S,valueNode:f,onValueNodeChange:g,valueNodeHasChildren:N,onValueNodeHasChildrenChange:D,contentId:Re(),value:H,onValueChange:U,open:k,onOpenChange:V,dir:Y,triggerPointerDownPosRef:R,disabled:y,children:[r.jsx(pe.Provider,{scope:o,children:r.jsx(io,{scope:t.__scopeSelect,onNativeOptionAdd:n.useCallback(A=>{L(K=>new Set(K).add(A))},[]),onNativeOptionRemove:n.useCallback(A=>{L(K=>{const $=new Set(K);return $.delete(A),$})},[]),children:e})}),j?r.jsxs(pt,{"aria-hidden":!0,required:C,tabIndex:-1,name:v,autoComplete:w,value:H,onChange:A=>U(A.target.value),disabled:y,form:m,children:[H===void 0?r.jsx("option",{value:""}):null,Array.from(z)]},B):null]})})};Ke.displayName=re;var We="SelectTrigger",$e=n.forwardRef((t,o)=>{const{__scopeSelect:e,disabled:c=!1,...d}=t,s=he(e),a=Z(We,e),l=a.disabled||c,i=W(o,a.onTriggerChange),p=fe(e),v=n.useRef("touch"),[w,y,C]=ht(u=>{const h=p().filter(g=>!g.disabled),S=h.find(g=>g.value===a.value),f=mt(h,u,S);f!==void 0&&a.onValueChange(f.value)}),m=u=>{l||(a.onOpenChange(!0),C()),u&&(a.triggerPointerDownPosRef.current={x:Math.round(u.pageX),y:Math.round(u.pageY)})};return r.jsx(Dt,{asChild:!0,...s,children:r.jsx(O.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":ft(a.value)?"":void 0,...d,ref:i,onClick:M(d.onClick,u=>{u.currentTarget.focus(),v.current!=="mouse"&&m(u)}),onPointerDown:M(d.onPointerDown,u=>{v.current=u.pointerType;const h=u.target;h.hasPointerCapture(u.pointerId)&&h.releasePointerCapture(u.pointerId),u.button===0&&u.ctrlKey===!1&&u.pointerType==="mouse"&&(m(u),u.preventDefault())}),onKeyDown:M(d.onKeyDown,u=>{const h=w.current!=="";!(u.ctrlKey||u.altKey||u.metaKey)&&u.key.length===1&&y(u.key),!(h&&u.key===" ")&&no.includes(u.key)&&(m(),u.preventDefault())})})})});$e.displayName=We;var qe="SelectValue",Ge=n.forwardRef((t,o)=>{const{__scopeSelect:e,className:c,style:d,children:s,placeholder:a="",...l}=t,i=Z(qe,e),{onValueNodeHasChildrenChange:p}=i,v=s!==void 0,w=W(o,i.onValueNodeChange);return X(()=>{p(v)},[p,v]),r.jsx(O.span,{...l,ref:w,style:{pointerEvents:"none"},children:ft(i.value)?r.jsx(r.Fragment,{children:a}):s})});Ge.displayName=qe;var uo="SelectIcon",Ye=n.forwardRef((t,o)=>{const{__scopeSelect:e,children:c,...d}=t;return r.jsx(O.span,{"aria-hidden":!0,...d,ref:o,children:c||"â–¼"})});Ye.displayName=uo;var po="SelectPortal",Qe=t=>r.jsx(At,{asChild:!0,...t});Qe.displayName=po;var ne="SelectContent",Xe=n.forwardRef((t,o)=>{const e=Z(ne,t.__scopeSelect),[c,d]=n.useState();if(X(()=>{d(new DocumentFragment)},[]),!e.open){const s=c;return s?Ae.createPortal(r.jsx(Ze,{scope:t.__scopeSelect,children:r.jsx(pe.Slot,{scope:t.__scopeSelect,children:r.jsx("div",{children:t.children})})}),s):null}return r.jsx(Je,{...t,ref:o})});Xe.displayName=ne;var G=10,[Ze,J]=ce(ne),fo="SelectContentImpl",ho=eo("SelectContent.RemoveScroll"),Je=n.forwardRef((t,o)=>{const{__scopeSelect:e,position:c="item-aligned",onCloseAutoFocus:d,onEscapeKeyDown:s,onPointerDownOutside:a,side:l,sideOffset:i,align:p,alignOffset:v,arrowPadding:w,collisionBoundary:y,collisionPadding:C,sticky:m,hideWhenDetached:u,avoidCollisions:h,...S}=t,f=Z(ne,e),[g,N]=n.useState(null),[D,Y]=n.useState(null),k=W(o,b=>N(b)),[V,H]=n.useState(null),[U,R]=n.useState(null),j=fe(e),[z,L]=n.useState(!1),B=n.useRef(!1);n.useEffect(()=>{if(g)return Bt(g)},[g]),Ft();const A=n.useCallback(b=>{const[_,...F]=j().map(E=>E.ref.current),[P]=F.slice(-1),T=document.activeElement;for(const E of b)if(E===T||(E==null||E.scrollIntoView({block:"nearest"}),E===_&&D&&(D.scrollTop=0),E===P&&D&&(D.scrollTop=D.scrollHeight),E==null||E.focus(),document.activeElement!==T))return},[j,D]),K=n.useCallback(()=>A([V,g]),[A,V,g]);n.useEffect(()=>{z&&K()},[z,K]);const{onOpenChange:$,triggerPointerDownPosRef:x}=f;n.useEffect(()=>{if(g){let b={x:0,y:0};const _=P=>{var T,E;b={x:Math.abs(Math.round(P.pageX)-(((T=x.current)==null?void 0:T.x)??0)),y:Math.abs(Math.round(P.pageY)-(((E=x.current)==null?void 0:E.y)??0))}},F=P=>{b.x<=10&&b.y<=10?P.preventDefault():g.contains(P.target)||$(!1),document.removeEventListener("pointermove",_),x.current=null};return x.current!==null&&(document.addEventListener("pointermove",_),document.addEventListener("pointerup",F,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",_),document.removeEventListener("pointerup",F,{capture:!0})}}},[g,$,x]),n.useEffect(()=>{const b=()=>$(!1);return window.addEventListener("blur",b),window.addEventListener("resize",b),()=>{window.removeEventListener("blur",b),window.removeEventListener("resize",b)}},[$]);const[I,q]=ht(b=>{const _=j().filter(T=>!T.disabled),F=_.find(T=>T.ref.current===document.activeElement),P=mt(_,b,F);P&&setTimeout(()=>P.ref.current.focus())}),se=n.useCallback((b,_,F)=>{const P=!B.current&&!F;(f.value!==void 0&&f.value===_||P)&&(H(b),P&&(B.current=!0))},[f.value]),ve=n.useCallback(()=>g==null?void 0:g.focus(),[g]),ae=n.useCallback((b,_,F)=>{const P=!B.current&&!F;(f.value!==void 0&&f.value===_||P)&&R(b)},[f.value]),de=c==="popper"?Te:et,ie=de===Te?{side:l,sideOffset:i,align:p,alignOffset:v,arrowPadding:w,collisionBoundary:y,collisionPadding:C,sticky:m,hideWhenDetached:u,avoidCollisions:h}:{};return r.jsx(Ze,{scope:e,content:g,viewport:D,onViewportChange:Y,itemRefCallback:se,selectedItem:V,onItemLeave:ve,itemTextRefCallback:ae,focusSelectedItem:K,selectedItemText:U,position:c,isPositioned:z,searchRef:I,children:r.jsx(Vt,{as:ho,allowPinchZoom:!0,children:r.jsx(Ht,{asChild:!0,trapped:f.open,onMountAutoFocus:b=>{b.preventDefault()},onUnmountAutoFocus:M(d,b=>{var _;(_=f.trigger)==null||_.focus({preventScroll:!0}),b.preventDefault()}),children:r.jsx(Ut,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:b=>b.preventDefault(),onDismiss:()=>f.onOpenChange(!1),children:r.jsx(de,{role:"listbox",id:f.contentId,"data-state":f.open?"open":"closed",dir:f.dir,onContextMenu:b=>b.preventDefault(),...S,...ie,onPlaced:()=>L(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:M(S.onKeyDown,b=>{const _=b.ctrlKey||b.altKey||b.metaKey;if(b.key==="Tab"&&b.preventDefault(),!_&&b.key.length===1&&q(b.key),["ArrowUp","ArrowDown","Home","End"].includes(b.key)){let P=j().filter(T=>!T.disabled).map(T=>T.ref.current);if(["ArrowUp","End"].includes(b.key)&&(P=P.slice().reverse()),["ArrowUp","ArrowDown"].includes(b.key)){const T=b.target,E=P.indexOf(T);P=P.slice(E+1)}setTimeout(()=>A(P)),b.preventDefault()}})})})})})})});Je.displayName=fo;var mo="SelectItemAlignedPosition",et=n.forwardRef((t,o)=>{const{__scopeSelect:e,onPlaced:c,...d}=t,s=Z(ne,e),a=J(ne,e),[l,i]=n.useState(null),[p,v]=n.useState(null),w=W(o,k=>v(k)),y=fe(e),C=n.useRef(!1),m=n.useRef(!0),{viewport:u,selectedItem:h,selectedItemText:S,focusSelectedItem:f}=a,g=n.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&p&&u&&h&&S){const k=s.trigger.getBoundingClientRect(),V=p.getBoundingClientRect(),H=s.valueNode.getBoundingClientRect(),U=S.getBoundingClientRect();if(s.dir!=="rtl"){const T=U.left-V.left,E=H.left-T,ee=k.left-E,te=k.width+ee,ge=Math.max(te,V.width),xe=window.innerWidth-G,Se=Me(E,[G,Math.max(G,xe-ge)]);l.style.minWidth=te+"px",l.style.left=Se+"px"}else{const T=V.right-U.right,E=window.innerWidth-H.right-T,ee=window.innerWidth-k.right-E,te=k.width+ee,ge=Math.max(te,V.width),xe=window.innerWidth-G,Se=Me(E,[G,Math.max(G,xe-ge)]);l.style.minWidth=te+"px",l.style.right=Se+"px"}const R=y(),j=window.innerHeight-G*2,z=u.scrollHeight,L=window.getComputedStyle(p),B=parseInt(L.borderTopWidth,10),A=parseInt(L.paddingTop,10),K=parseInt(L.borderBottomWidth,10),$=parseInt(L.paddingBottom,10),x=B+A+z+$+K,I=Math.min(h.offsetHeight*5,x),q=window.getComputedStyle(u),se=parseInt(q.paddingTop,10),ve=parseInt(q.paddingBottom,10),ae=k.top+k.height/2-G,de=j-ae,ie=h.offsetHeight/2,b=h.offsetTop+ie,_=B+A+b,F=x-_;if(_<=ae){const T=R.length>0&&h===R[R.length-1].ref.current;l.style.bottom="0px";const E=p.clientHeight-u.offsetTop-u.offsetHeight,ee=Math.max(de,ie+(T?ve:0)+E+K),te=_+ee;l.style.height=te+"px"}else{const T=R.length>0&&h===R[0].ref.current;l.style.top="0px";const ee=Math.max(ae,B+u.offsetTop+(T?se:0)+ie)+F;l.style.height=ee+"px",u.scrollTop=_-ae+u.offsetTop}l.style.margin=`${G}px 0`,l.style.minHeight=I+"px",l.style.maxHeight=j+"px",c==null||c(),requestAnimationFrame(()=>C.current=!0)}},[y,s.trigger,s.valueNode,l,p,u,h,S,s.dir,c]);X(()=>g(),[g]);const[N,D]=n.useState();X(()=>{p&&D(window.getComputedStyle(p).zIndex)},[p]);const Y=n.useCallback(k=>{k&&m.current===!0&&(g(),f==null||f(),m.current=!1)},[g,f]);return r.jsx(go,{scope:e,contentWrapper:l,shouldExpandOnScrollRef:C,onScrollButtonChange:Y,children:r.jsx("div",{ref:i,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:r.jsx(O.div,{...d,ref:w,style:{boxSizing:"border-box",maxHeight:"100%",...d.style}})})})});et.displayName=mo;var vo="SelectPopperPosition",Te=n.forwardRef((t,o)=>{const{__scopeSelect:e,align:c="start",collisionPadding:d=G,...s}=t,a=he(e);return r.jsx(zt,{...a,...s,ref:o,align:c,collisionPadding:d,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Te.displayName=vo;var[go,je]=ce(ne,{}),Ee="SelectViewport",tt=n.forwardRef((t,o)=>{const{__scopeSelect:e,nonce:c,...d}=t,s=J(Ee,e),a=je(Ee,e),l=W(o,s.onViewportChange),i=n.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:c}),r.jsx(pe.Slot,{scope:e,children:r.jsx(O.div,{"data-radix-select-viewport":"",role:"presentation",...d,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...d.style},onScroll:M(d.onScroll,p=>{const v=p.currentTarget,{contentWrapper:w,shouldExpandOnScrollRef:y}=a;if(y!=null&&y.current&&w){const C=Math.abs(i.current-v.scrollTop);if(C>0){const m=window.innerHeight-G*2,u=parseFloat(w.style.minHeight),h=parseFloat(w.style.height),S=Math.max(u,h);if(S<m){const f=S+C,g=Math.min(m,f),N=f-g;w.style.height=g+"px",w.style.bottom==="0px"&&(v.scrollTop=N>0?N:0,w.style.justifyContent="flex-end")}}}i.current=v.scrollTop})})})]})});tt.displayName=Ee;var ot="SelectGroup",[xo,So]=ce(ot),wo=n.forwardRef((t,o)=>{const{__scopeSelect:e,...c}=t,d=Re();return r.jsx(xo,{scope:e,id:d,children:r.jsx(O.div,{role:"group","aria-labelledby":d,...c,ref:o})})});wo.displayName=ot;var rt="SelectLabel",Co=n.forwardRef((t,o)=>{const{__scopeSelect:e,...c}=t,d=So(rt,e);return r.jsx(O.div,{id:d.id,...c,ref:o})});Co.displayName=rt;var ue="SelectItem",[bo,nt]=ce(ue),st=n.forwardRef((t,o)=>{const{__scopeSelect:e,value:c,disabled:d=!1,textValue:s,...a}=t,l=Z(ue,e),i=J(ue,e),p=l.value===c,[v,w]=n.useState(s??""),[y,C]=n.useState(!1),m=W(o,f=>{var g;return(g=i.itemRefCallback)==null?void 0:g.call(i,f,c,d)}),u=Re(),h=n.useRef("touch"),S=()=>{d||(l.onValueChange(c),l.onOpenChange(!1))};if(c==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(bo,{scope:e,value:c,disabled:d,textId:u,isSelected:p,onItemTextChange:n.useCallback(f=>{w(g=>g||((f==null?void 0:f.textContent)??"").trim())},[]),children:r.jsx(pe.ItemSlot,{scope:e,value:c,disabled:d,textValue:v,children:r.jsx(O.div,{role:"option","aria-labelledby":u,"data-highlighted":y?"":void 0,"aria-selected":p&&y,"data-state":p?"checked":"unchecked","aria-disabled":d||void 0,"data-disabled":d?"":void 0,tabIndex:d?void 0:-1,...a,ref:m,onFocus:M(a.onFocus,()=>C(!0)),onBlur:M(a.onBlur,()=>C(!1)),onClick:M(a.onClick,()=>{h.current!=="mouse"&&S()}),onPointerUp:M(a.onPointerUp,()=>{h.current==="mouse"&&S()}),onPointerDown:M(a.onPointerDown,f=>{h.current=f.pointerType}),onPointerMove:M(a.onPointerMove,f=>{var g;h.current=f.pointerType,d?(g=i.onItemLeave)==null||g.call(i):h.current==="mouse"&&f.currentTarget.focus({preventScroll:!0})}),onPointerLeave:M(a.onPointerLeave,f=>{var g;f.currentTarget===document.activeElement&&((g=i.onItemLeave)==null||g.call(i))}),onKeyDown:M(a.onKeyDown,f=>{var N;((N=i.searchRef)==null?void 0:N.current)!==""&&f.key===" "||(so.includes(f.key)&&S(),f.key===" "&&f.preventDefault())})})})})});st.displayName=ue;var le="SelectItemText",at=n.forwardRef((t,o)=>{const{__scopeSelect:e,className:c,style:d,...s}=t,a=Z(le,e),l=J(le,e),i=nt(le,e),p=lo(le,e),[v,w]=n.useState(null),y=W(o,S=>w(S),i.onItemTextChange,S=>{var f;return(f=l.itemTextRefCallback)==null?void 0:f.call(l,S,i.value,i.disabled)}),C=v==null?void 0:v.textContent,m=n.useMemo(()=>r.jsx("option",{value:i.value,disabled:i.disabled,children:C},i.value),[i.disabled,i.value,C]),{onNativeOptionAdd:u,onNativeOptionRemove:h}=p;return X(()=>(u(m),()=>h(m)),[u,h,m]),r.jsxs(r.Fragment,{children:[r.jsx(O.span,{id:i.textId,...s,ref:y}),i.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Ae.createPortal(s.children,a.valueNode):null]})});at.displayName=le;var ct="SelectItemIndicator",it=n.forwardRef((t,o)=>{const{__scopeSelect:e,...c}=t;return nt(ct,e).isSelected?r.jsx(O.span,{"aria-hidden":!0,...c,ref:o}):null});it.displayName=ct;var Pe="SelectScrollUpButton",lt=n.forwardRef((t,o)=>{const e=J(Pe,t.__scopeSelect),c=je(Pe,t.__scopeSelect),[d,s]=n.useState(!1),a=W(o,c.onScrollButtonChange);return X(()=>{if(e.viewport&&e.isPositioned){let l=function(){const p=i.scrollTop>0;s(p)};const i=e.viewport;return l(),i.addEventListener("scroll",l),()=>i.removeEventListener("scroll",l)}},[e.viewport,e.isPositioned]),d?r.jsx(ut,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:i}=e;l&&i&&(l.scrollTop=l.scrollTop-i.offsetHeight)}}):null});lt.displayName=Pe;var _e="SelectScrollDownButton",dt=n.forwardRef((t,o)=>{const e=J(_e,t.__scopeSelect),c=je(_e,t.__scopeSelect),[d,s]=n.useState(!1),a=W(o,c.onScrollButtonChange);return X(()=>{if(e.viewport&&e.isPositioned){let l=function(){const p=i.scrollHeight-i.clientHeight,v=Math.ceil(i.scrollTop)<p;s(v)};const i=e.viewport;return l(),i.addEventListener("scroll",l),()=>i.removeEventListener("scroll",l)}},[e.viewport,e.isPositioned]),d?r.jsx(ut,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:i}=e;l&&i&&(l.scrollTop=l.scrollTop+i.offsetHeight)}}):null});dt.displayName=_e;var ut=n.forwardRef((t,o)=>{const{__scopeSelect:e,onAutoScroll:c,...d}=t,s=J("SelectScrollButton",e),a=n.useRef(null),l=fe(e),i=n.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return n.useEffect(()=>()=>i(),[i]),X(()=>{var v;const p=l().find(w=>w.ref.current===document.activeElement);(v=p==null?void 0:p.ref.current)==null||v.scrollIntoView({block:"nearest"})},[l]),r.jsx(O.div,{"aria-hidden":!0,...d,ref:o,style:{flexShrink:0,...d.style},onPointerDown:M(d.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(c,50))}),onPointerMove:M(d.onPointerMove,()=>{var p;(p=s.onItemLeave)==null||p.call(s),a.current===null&&(a.current=window.setInterval(c,50))}),onPointerLeave:M(d.onPointerLeave,()=>{i()})})}),yo="SelectSeparator",Io=n.forwardRef((t,o)=>{const{__scopeSelect:e,...c}=t;return r.jsx(O.div,{"aria-hidden":!0,...c,ref:o})});Io.displayName=yo;var Ne="SelectArrow",To=n.forwardRef((t,o)=>{const{__scopeSelect:e,...c}=t,d=he(e),s=Z(Ne,e),a=J(Ne,e);return s.open&&a.position==="popper"?r.jsx(Kt,{...d,...c,ref:o}):null});To.displayName=Ne;var Eo="SelectBubbleInput",pt=n.forwardRef(({__scopeSelect:t,value:o,...e},c)=>{const d=n.useRef(null),s=W(c,d),a=ze(o);return n.useEffect(()=>{const l=d.current;if(!l)return;const i=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(i,"value").set;if(a!==o&&v){const w=new Event("change",{bubbles:!0});v.call(l,o),l.dispatchEvent(w)}},[a,o]),r.jsx(O.select,{...e,style:{...Ot,...e.style},ref:s,defaultValue:o})});pt.displayName=Eo;function ft(t){return t===""||t===void 0}function ht(t){const o=Lt(t),e=n.useRef(""),c=n.useRef(0),d=n.useCallback(a=>{const l=e.current+a;o(l),function i(p){e.current=p,window.clearTimeout(c.current),p!==""&&(c.current=window.setTimeout(()=>i(""),1e3))}(l)},[o]),s=n.useCallback(()=>{e.current="",window.clearTimeout(c.current)},[]);return n.useEffect(()=>()=>window.clearTimeout(c.current),[]),[e,d,s]}function mt(t,o,e){const d=o.length>1&&Array.from(o).every(p=>p===o[0])?o[0]:o,s=e?t.indexOf(e):-1;let a=Po(t,Math.max(s,0));d.length===1&&(a=a.filter(p=>p!==e));const i=a.find(p=>p.textValue.toLowerCase().startsWith(d.toLowerCase()));return i!==e?i:void 0}function Po(t,o){return t.map((e,c)=>t[(o+c)%t.length])}var _o=Ke,No=$e,Ro=Ge,jo=Ye,ko=Qe,Mo=Xe,Do=tt,Ao=st,Oo=at,Lo=it,Bo=lt,Fo=dt;function Jo({...t}){return r.jsx(_o,{"data-slot":"select",...t})}function er({...t}){return r.jsx(Ro,{"data-slot":"select-value",...t})}function tr({className:t,size:o="default",children:e,...c}){return r.jsxs(No,{"data-slot":"select-trigger","data-size":o,className:oe("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...c,children:[e,r.jsx(jo,{asChild:!0,children:r.jsx(Ue,{className:"size-4 opacity-50"})})]})}function or({className:t,children:o,position:e="popper",...c}){return r.jsx(ko,{children:r.jsxs(Mo,{"data-slot":"select-content",className:oe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",e==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:e,...c,children:[r.jsx(Vo,{}),r.jsx(Do,{className:oe("p-1",e==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:o}),r.jsx(Ho,{})]})})}function rr({className:t,children:o,...e}){return r.jsxs(Ao,{"data-slot":"select-item",className:oe("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...e,children:[r.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:r.jsx(Lo,{children:r.jsx(Fe,{className:"size-4"})})}),r.jsx(Oo,{children:o})]})}function Vo({className:t,...o}){return r.jsx(Bo,{"data-slot":"select-scroll-up-button",className:oe("flex cursor-default items-center justify-center py-1",t),...o,children:r.jsx(ro,{className:"size-4"})})}function Ho({className:t,...o}){return r.jsx(Fo,{"data-slot":"select-scroll-down-button",className:oe("flex cursor-default items-center justify-center py-1",t),...o,children:r.jsx(Ue,{className:"size-4"})})}var me="Checkbox",[Uo,nr]=Be(me),[zo,ke]=Uo(me);function Ko(t){const{__scopeCheckbox:o,checked:e,children:c,defaultChecked:d,disabled:s,form:a,name:l,onCheckedChange:i,required:p,value:v="on",internal_do_not_use_render:w}=t,[y,C]=be({prop:e,defaultProp:d??!1,onChange:i,caller:me}),[m,u]=n.useState(null),[h,S]=n.useState(null),f=n.useRef(!1),g=m?!!a||!!m.closest("form"):!0,N={checked:y,disabled:s,setChecked:C,control:m,setControl:u,name:l,form:a,value:v,hasConsumerStoppedPropagationRef:f,required:p,defaultChecked:Q(d)?!1:d,isFormControl:g,bubbleInput:h,setBubbleInput:S};return r.jsx(zo,{scope:o,...N,children:Wo(w)?w(N):c})}var vt="CheckboxTrigger",gt=n.forwardRef(({__scopeCheckbox:t,onKeyDown:o,onClick:e,...c},d)=>{const{control:s,value:a,disabled:l,checked:i,required:p,setControl:v,setChecked:w,hasConsumerStoppedPropagationRef:y,isFormControl:C,bubbleInput:m}=ke(vt,t),u=W(d,v),h=n.useRef(i);return n.useEffect(()=>{const S=s==null?void 0:s.form;if(S){const f=()=>w(h.current);return S.addEventListener("reset",f),()=>S.removeEventListener("reset",f)}},[s,w]),r.jsx(O.button,{type:"button",role:"checkbox","aria-checked":Q(i)?"mixed":i,"aria-required":p,"data-state":yt(i),"data-disabled":l?"":void 0,disabled:l,value:a,...c,ref:u,onKeyDown:M(o,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:M(e,S=>{w(f=>Q(f)?!0:!f),m&&C&&(y.current=S.isPropagationStopped(),y.current||S.stopPropagation())})})});gt.displayName=vt;var xt=n.forwardRef((t,o)=>{const{__scopeCheckbox:e,name:c,checked:d,defaultChecked:s,required:a,disabled:l,value:i,onCheckedChange:p,form:v,...w}=t;return r.jsx(Ko,{__scopeCheckbox:e,checked:d,defaultChecked:s,disabled:l,required:a,onCheckedChange:p,name:c,form:v,value:i,internal_do_not_use_render:({isFormControl:y})=>r.jsxs(r.Fragment,{children:[r.jsx(gt,{...w,ref:o,__scopeCheckbox:e}),y&&r.jsx(bt,{__scopeCheckbox:e})]})})});xt.displayName=me;var St="CheckboxIndicator",wt=n.forwardRef((t,o)=>{const{__scopeCheckbox:e,forceMount:c,...d}=t,s=ke(St,e);return r.jsx(Wt,{present:c||Q(s.checked)||s.checked===!0,children:r.jsx(O.span,{"data-state":yt(s.checked),"data-disabled":s.disabled?"":void 0,...d,ref:o,style:{pointerEvents:"none",...t.style}})})});wt.displayName=St;var Ct="CheckboxBubbleInput",bt=n.forwardRef(({__scopeCheckbox:t,...o},e)=>{const{control:c,hasConsumerStoppedPropagationRef:d,checked:s,defaultChecked:a,required:l,disabled:i,name:p,value:v,form:w,bubbleInput:y,setBubbleInput:C}=ke(Ct,t),m=W(e,C),u=ze(s),h=$t(c);n.useEffect(()=>{const f=y;if(!f)return;const g=window.HTMLInputElement.prototype,D=Object.getOwnPropertyDescriptor(g,"checked").set,Y=!d.current;if(u!==s&&D){const k=new Event("click",{bubbles:Y});f.indeterminate=Q(s),D.call(f,Q(s)?!1:s),f.dispatchEvent(k)}},[y,u,s,d]);const S=n.useRef(Q(s)?!1:s);return r.jsx(O.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??S.current,required:l,disabled:i,name:p,value:v,form:w,...o,tabIndex:-1,ref:m,style:{...o.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});bt.displayName=Ct;function Wo(t){return typeof t=="function"}function Q(t){return t==="indeterminate"}function yt(t){return Q(t)?"indeterminate":t?"checked":"unchecked"}function sr({className:t,...o}){return r.jsx(xt,{"data-slot":"checkbox",className:oe("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...o,children:r.jsx(wt,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:r.jsx(Fe,{className:"size-3.5"})})})}function ar(t){const{schema:o,defaultValues:e,transformToApi:c=m=>m,fetchFn:d,notifications:s,onSuccess:a}=t,[l,i]=n.useState(null),p=Ve({resolver:He(o),defaultValues:e,mode:"onChange"}),v={success:(m,u)=>{var h;(h=s==null?void 0:s.onSuccess)==null||h.call(s,m,u)},error:(m,u)=>{var S;const h=u instanceof Error?u:new Error(m);i(h),(S=s==null?void 0:s.onError)==null||S.call(s,m,u)},loading:m=>{var u;(u=s==null?void 0:s.onLoading)==null||u.call(s,m)}},w=Ie({mutationFn:async m=>{const u=c(m);return await d(u)},onMutate:()=>{v.loading("Saving...")},onSuccess:m=>{v.success("Saved successfully"),a==null||a(m)},onError:m=>{ye(m)}}),y=p.handleSubmit(m=>{w.mutate(m)},()=>{i(new Error("Form validation failed"))}),C=n.useCallback(()=>{p.reset(e),i(null)},[e]);return{form:p,handleSubmit:y,handleReset:C,isSubmitting:w.isPending,mutation:w,error:l,setError:i}}const cr=({url:t})=>({get:async o=>we({url:`${t}/${o}/`,method:"GET"}),create:async o=>we({url:`${t}/`,method:"POST",body:o}),update:async(o,e)=>we({url:`${t}/${o}/`,method:"PATCH",body:e})});function ir(t){const{schema:o,defaultValues:e,initialMode:c="create",initialRecord:d=null,recordId:s,transformToForm:a=(x,I)=>x,transformToApi:l=x=>x,switchToEditOnCreate:i=!0,apiService:p,onCreateSuccess:v,onUpdateSuccess:w,onLoadSuccess:y,notifications:C,queryKey:m="records",invalidateQueriesOnMutate:u=!0}=t,[h,S]=n.useState(c),[f,g]=n.useState(s),[N,D]=n.useState(d),[Y,k]=n.useState(!1),[V,H]=n.useState(null),U=It(),R=Ve({resolver:o?He(o):void 0,defaultValues:e,mode:"onChange"}),j={success:(x,I)=>{var q;(q=C==null?void 0:C.onSuccess)==null||q.call(C,x,I)},error:(x,I)=>{var se;const q=I instanceof Error?I:new Error(x);H(q),(se=C==null?void 0:C.onError)==null||se.call(C,x,I)},loading:x=>{var I;(I=C==null?void 0:C.onLoading)==null||I.call(C,x)}},z=Ie({mutationFn:async x=>{if(!p)throw new Error("API service not provided");const I=l(x);return await p.create(I)},onMutate:()=>{j.loading("Creating record...")},onSuccess:x=>{D(x),g(x.id),j.success("Record created successfully",x),i&&(S("edit"),R.reset(a(x,{action:"post"}))),u&&U.invalidateQueries({queryKey:[m]}),v==null||v(x)},onError:x=>{ye(x,{form:R})}}),L=Ie({mutationFn:async x=>{if(!p)throw new Error("API service not provided");const I=l(x);return await p.update(`${f}`,I)},onMutate:()=>{j.loading("Updating record...")},onSuccess:x=>{D(x),j.success("Record updated successfully",x),u&&(U.invalidateQueries({queryKey:[m,x.id]}),U.invalidateQueries({queryKey:[m]})),w==null||w(x)},onError:x=>{ye(x,{form:R})}});n.useEffect(()=>{f&&p&&(h==="edit"||h==="view")&&B(`${f}`).catch(x=>j.error("Failed to load record",x))},[f,h]),n.useEffect(()=>{s?(h==="create"&&S("edit"),f!==s&&g(s)):(R.reset(e||{}),S("create"))},[s]);const B=async x=>{if(!p)throw new Error("API service not provided");k(!0),j.loading("Loading record...");try{const I=await p.get(x);return D(I),g(I.id),h!=="create"&&R.reset(a(I,{action:"load"})),y==null||y(I),U.setQueryData([m,x],I),I}catch(I){throw j.error("Failed to load record",I),I}finally{k(!1)}},A=R.handleSubmit(x=>{h==="edit"?L.mutate(x):z.mutate(x)},()=>{j.error("Form validation failed")}),K=n.useCallback(()=>{h==="create"?R.reset(e||{}):N?R.reset(a(N,{action:"reset"})):R.reset(),H(null)},[h,N,e]),$=n.useCallback(async x=>{const I=x||f;if(!I)return j.error("No record ID provided"),Promise.reject(new Error("No record ID provided"));try{await B(`${I}`)}catch(q){return Promise.reject(q)}},[f]);return{form:R,formMode:h,setFormMode:S,recordId:f,setRecordId:g,record:N,isLoading:Y,isSubmitting:z.isPending||L.isPending,isViewMode:h==="view",error:V,setError:H,handleSubmit:A,handleReset:K,handleLoad:$,loadRecord:B,createMutation:z,updateMutation:L,notify:j}}const lr=({formName:t,formHook:o,modal:e,displayType:c,getTitle:d,isProcessing:s=!1,children:a,getSubmitButtonText:l})=>{const i=n.useMemo(()=>l?l(o):o.formMode==="create"?"Create":"Save Changes",[o,l]),p=n.useMemo(()=>d(o),[d,o]);if(c==="dialog")return r.jsx(Tt,{open:e.visible,onOpenChange:v=>{v||e.hide(),o.form.reset()},children:r.jsx(Et,{className:"!max-w-[1000px]",children:r.jsxs("form",{id:t,onSubmit:o.handleSubmit,children:[r.jsxs(Pt,{className:"text-left",children:[r.jsx(_t,{children:p}),r.jsx(Nt,{children:"Click save when you are done."})]}),r.jsx("div",{className:"-mr-4 w-full overflow-y-auto pt-4 pr-4",children:typeof a=="function"?a(o.form):a}),r.jsx(Rt,{children:r.jsx(Ce,{type:"submit",form:t,disabled:s,children:i})})]})})});if(c==="drawer")return r.jsx(qt,{open:e.visible,onOpenChange:v=>{v||e.hide(),o.form.reset()},children:r.jsx(Gt,{className:"flex flex-col",children:r.jsxs("form",{onSubmit:o.handleSubmit,children:[r.jsxs(Yt,{className:"text-left",children:[r.jsx(Qt,{children:p}),r.jsx(Xt,{children:"Click save when you are done."})]}),typeof a=="function"?a(o.form):a,r.jsxs(Zt,{className:"gap-2",children:[r.jsx(Jt,{asChild:!0,children:r.jsx(Ce,{variant:"outline",children:"Close"})}),r.jsx(Ce,{form:t,type:"submit",disabled:s,children:i})]})]})})})},dr=()=>({showSuccessToast:e=>{const c=typeof e=="string"?{title:"Success!",description:e}:e;De("error",{message:c.title,data:{description:c.description,duration:c.duration}})},showErrorToast:e=>{const c=typeof e=="string"?{title:"Something went wrong!",description:e}:e;De("error",{message:c.title,data:{description:c.description,duration:c.duration}})}});export{lr as C,Jo as S,dr as a,ir as b,cr as c,Ue as d,ro as e,sr as f,tr as g,er as h,or as i,rr as j,ar as u};
