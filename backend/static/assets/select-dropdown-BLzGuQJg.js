import{r as l,j as e,c as Ge,d as Jt}from"./index-BmiyAELg.js";import{b as eo,d as to,e as oo,f as ro,g as so,P as no,h as ao,M as lo,i as io,D as co,T as uo,j as po,k as Ne,l as fo,m as $e,n as ho,o as mo,p as Ue}from"./use-custom-toast-CvPjYmcL.js";import{a as go,u as q,P as F,b as Qe,c as D,B as W}from"./createReactComponent-DAnOonP9.js";import{b as xo,s as he,a as Te}from"./use-auth-js2yB0WI.js";import{B as Ie}from"./badge-BDni1Y-G.js";import{c as Ke,C as vo,b as wo,d as So,e as Co,f as We,g as qe,h as yo,D as jo,i as bo,j as Po,k as No,l as Io,m as To}from"./search-context-emn1PgDM.js";import{S as _o}from"./theme-switch-_yrpSE89.js";import{I as Ye,u as Ze,s as Xe,d as Ro}from"./index-vTqYkbZ5.js";import{c as Je,O as ge,F as Eo,u as _e,Q as et,a as tt,b as xe,T as Do,U as Be,d as _,e as Z,V as ot,W as Mo,X as Ao,Y as rt,Z as st,_ as nt,$ as at,a0 as lt,a1 as it,a2 as ct,a3 as Oo,P as dt,a4 as ko,D as Fo,a5 as Lo,l as Vo,m as Bo,n as Ho,a6 as zo,a7 as $o,a8 as Uo,a9 as Ko,aa as Wo,H as qo,J as Go,K as Qo,L as Yo,M as Zo,N as Xo,ab as Jo}from"./IconSun-CD0sLG3_.js";import{h as Re}from"./handle-server-error-D0TgnIKM.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ut=Je("chevron-down",er);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],or=Je("chevron-up",tr);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rr=go("outline","loader","IconLoader",[["path",{d:"M12 6l0 -3",key:"svg-0"}],["path",{d:"M16.25 7.75l2.15 -2.15",key:"svg-1"}],["path",{d:"M18 12l3 0",key:"svg-2"}],["path",{d:"M16.25 16.25l2.15 2.15",key:"svg-3"}],["path",{d:"M12 18l0 3",key:"svg-4"}],["path",{d:"M7.75 16.25l-2.15 2.15",key:"svg-5"}],["path",{d:"M6 12l-3 0",key:"svg-6"}],["path",{d:"M7.75 7.75l-2.15 -2.15",key:"svg-7"}]]),sr=[" ","Enter","ArrowUp","ArrowDown"],nr=[" ","Enter"],se="Select",[ve,we,ar]=Do(se),[ce,ws]=tt(se,[ar,ge]),Se=ge(),[lr,X]=ce(se),[ir,cr]=ce(se),pt=t=>{const{__scopeSelect:o,children:r,open:a,defaultOpen:s,onOpenChange:n,value:i,defaultValue:c,onValueChange:u,dir:d,name:h,autoComplete:S,disabled:y,required:C,form:v}=t,p=Se(o),[m,j]=l.useState(null),[f,x]=l.useState(null),[A,k]=l.useState(!1),te=Eo(d),[M,H]=_e({prop:a,defaultProp:s??!1,onChange:n,caller:se}),[z,$]=_e({prop:i,defaultProp:c,onChange:u,caller:se}),R=l.useRef(null),E=m?v||!!m.closest("form"):!0,[U,L]=l.useState(new Set),V=Array.from(U).map(O=>O.props.value).join(";");return e.jsx(et,{...p,children:e.jsxs(lr,{required:C,scope:o,trigger:m,onTriggerChange:j,valueNode:f,onValueNodeChange:x,valueNodeHasChildren:A,onValueNodeHasChildrenChange:k,contentId:xe(),value:z,onValueChange:$,open:M,onOpenChange:H,dir:te,triggerPointerDownPosRef:R,disabled:y,children:[e.jsx(ve.Provider,{scope:o,children:e.jsx(ir,{scope:t.__scopeSelect,onNativeOptionAdd:l.useCallback(O=>{L(K=>new Set(K).add(O))},[]),onNativeOptionRemove:l.useCallback(O=>{L(K=>{const G=new Set(K);return G.delete(O),G})},[]),children:r})}),E?e.jsxs(At,{"aria-hidden":!0,required:C,tabIndex:-1,name:h,autoComplete:S,value:z,onChange:O=>$(O.target.value),disabled:y,form:v,children:[z===void 0?e.jsx("option",{value:""}):null,Array.from(U)]},V):null]})})};pt.displayName=se;var ft="SelectTrigger",ht=l.forwardRef((t,o)=>{const{__scopeSelect:r,disabled:a=!1,...s}=t,n=Se(r),i=X(ft,r),c=i.disabled||a,u=q(o,i.onTriggerChange),d=we(r),h=l.useRef("touch"),[S,y,C]=kt(p=>{const m=d().filter(x=>!x.disabled),j=m.find(x=>x.value===i.value),f=Ft(m,p,j);f!==void 0&&i.onValueChange(f.value)}),v=p=>{c||(i.onOpenChange(!0),C()),p&&(i.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return e.jsx(Be,{asChild:!0,...n,children:e.jsx(F.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":Ot(i.value)?"":void 0,...s,ref:u,onClick:_(s.onClick,p=>{p.currentTarget.focus(),h.current!=="mouse"&&v(p)}),onPointerDown:_(s.onPointerDown,p=>{h.current=p.pointerType;const m=p.target;m.hasPointerCapture(p.pointerId)&&m.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(v(p),p.preventDefault())}),onKeyDown:_(s.onKeyDown,p=>{const m=S.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&y(p.key),!(m&&p.key===" ")&&sr.includes(p.key)&&(v(),p.preventDefault())})})})});ht.displayName=ft;var mt="SelectValue",gt=l.forwardRef((t,o)=>{const{__scopeSelect:r,className:a,style:s,children:n,placeholder:i="",...c}=t,u=X(mt,r),{onValueNodeHasChildrenChange:d}=u,h=n!==void 0,S=q(o,u.onValueNodeChange);return Z(()=>{d(h)},[d,h]),e.jsx(F.span,{...c,ref:S,style:{pointerEvents:"none"},children:Ot(u.value)?e.jsx(e.Fragment,{children:i}):n})});gt.displayName=mt;var dr="SelectIcon",xt=l.forwardRef((t,o)=>{const{__scopeSelect:r,children:a,...s}=t;return e.jsx(F.span,{"aria-hidden":!0,...s,ref:o,children:a||"â–¼"})});xt.displayName=dr;var ur="SelectPortal",vt=t=>e.jsx(ot,{asChild:!0,...t});vt.displayName=ur;var ne="SelectContent",wt=l.forwardRef((t,o)=>{const r=X(ne,t.__scopeSelect),[a,s]=l.useState();if(Z(()=>{s(new DocumentFragment)},[]),!r.open){const n=a;return n?Ge.createPortal(e.jsx(St,{scope:t.__scopeSelect,children:e.jsx(ve.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),n):null}return e.jsx(Ct,{...t,ref:o})});wt.displayName=ne;var Y=10,[St,J]=ce(ne),pr="SelectContentImpl",fr=Qe("SelectContent.RemoveScroll"),Ct=l.forwardRef((t,o)=>{const{__scopeSelect:r,position:a="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:n,onPointerDownOutside:i,side:c,sideOffset:u,align:d,alignOffset:h,arrowPadding:S,collisionBoundary:y,collisionPadding:C,sticky:v,hideWhenDetached:p,avoidCollisions:m,...j}=t,f=X(ne,r),[x,A]=l.useState(null),[k,te]=l.useState(null),M=q(o,w=>A(w)),[H,z]=l.useState(null),[$,R]=l.useState(null),E=we(r),[U,L]=l.useState(!1),V=l.useRef(!1);l.useEffect(()=>{if(x)return rt(x)},[x]),st();const O=l.useCallback(w=>{const[T,...B]=E().map(N=>N.ref.current),[I]=B.slice(-1),P=document.activeElement;for(const N of w)if(N===P||(N==null||N.scrollIntoView({block:"nearest"}),N===T&&k&&(k.scrollTop=0),N===I&&k&&(k.scrollTop=k.scrollHeight),N==null||N.focus(),document.activeElement!==P))return},[E,k]),K=l.useCallback(()=>O([H,x]),[O,H,x]);l.useEffect(()=>{U&&K()},[U,K]);const{onOpenChange:G,triggerPointerDownPosRef:g}=f;l.useEffect(()=>{if(x){let w={x:0,y:0};const T=I=>{var P,N;w={x:Math.abs(Math.round(I.pageX)-(((P=g.current)==null?void 0:P.x)??0)),y:Math.abs(Math.round(I.pageY)-(((N=g.current)==null?void 0:N.y)??0))}},B=I=>{w.x<=10&&w.y<=10?I.preventDefault():x.contains(I.target)||G(!1),document.removeEventListener("pointermove",T),g.current=null};return g.current!==null&&(document.addEventListener("pointermove",T),document.addEventListener("pointerup",B,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",T),document.removeEventListener("pointerup",B,{capture:!0})}}},[x,G,g]),l.useEffect(()=>{const w=()=>G(!1);return window.addEventListener("blur",w),window.addEventListener("resize",w),()=>{window.removeEventListener("blur",w),window.removeEventListener("resize",w)}},[G]);const[b,Q]=kt(w=>{const T=E().filter(P=>!P.disabled),B=T.find(P=>P.ref.current===document.activeElement),I=Ft(T,w,B);I&&setTimeout(()=>I.ref.current.focus())}),ae=l.useCallback((w,T,B)=>{const I=!V.current&&!B;(f.value!==void 0&&f.value===T||I)&&(z(w),I&&(V.current=!0))},[f.value]),ye=l.useCallback(()=>x==null?void 0:x.focus(),[x]),le=l.useCallback((w,T,B)=>{const I=!V.current&&!B;(f.value!==void 0&&f.value===T||I)&&R(w)},[f.value]),fe=a==="popper"?Ee:yt,de=fe===Ee?{side:c,sideOffset:u,align:d,alignOffset:h,arrowPadding:S,collisionBoundary:y,collisionPadding:C,sticky:v,hideWhenDetached:p,avoidCollisions:m}:{};return e.jsx(St,{scope:r,content:x,viewport:k,onViewportChange:te,itemRefCallback:ae,selectedItem:H,onItemLeave:ye,itemTextRefCallback:le,focusSelectedItem:K,selectedItemText:$,position:a,isPositioned:U,searchRef:b,children:e.jsx(nt,{as:fr,allowPinchZoom:!0,children:e.jsx(at,{asChild:!0,trapped:f.open,onMountAutoFocus:w=>{w.preventDefault()},onUnmountAutoFocus:_(s,w=>{var T;(T=f.trigger)==null||T.focus({preventScroll:!0}),w.preventDefault()}),children:e.jsx(lt,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:w=>w.preventDefault(),onDismiss:()=>f.onOpenChange(!1),children:e.jsx(fe,{role:"listbox",id:f.contentId,"data-state":f.open?"open":"closed",dir:f.dir,onContextMenu:w=>w.preventDefault(),...j,...de,onPlaced:()=>L(!0),ref:M,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:_(j.onKeyDown,w=>{const T=w.ctrlKey||w.altKey||w.metaKey;if(w.key==="Tab"&&w.preventDefault(),!T&&w.key.length===1&&Q(w.key),["ArrowUp","ArrowDown","Home","End"].includes(w.key)){let I=E().filter(P=>!P.disabled).map(P=>P.ref.current);if(["ArrowUp","End"].includes(w.key)&&(I=I.slice().reverse()),["ArrowUp","ArrowDown"].includes(w.key)){const P=w.target,N=I.indexOf(P);I=I.slice(N+1)}setTimeout(()=>O(I)),w.preventDefault()}})})})})})})});Ct.displayName=pr;var hr="SelectItemAlignedPosition",yt=l.forwardRef((t,o)=>{const{__scopeSelect:r,onPlaced:a,...s}=t,n=X(ne,r),i=J(ne,r),[c,u]=l.useState(null),[d,h]=l.useState(null),S=q(o,M=>h(M)),y=we(r),C=l.useRef(!1),v=l.useRef(!0),{viewport:p,selectedItem:m,selectedItemText:j,focusSelectedItem:f}=i,x=l.useCallback(()=>{if(n.trigger&&n.valueNode&&c&&d&&p&&m&&j){const M=n.trigger.getBoundingClientRect(),H=d.getBoundingClientRect(),z=n.valueNode.getBoundingClientRect(),$=j.getBoundingClientRect();if(n.dir!=="rtl"){const P=$.left-H.left,N=z.left-P,oe=M.left-N,re=M.width+oe,je=Math.max(re,H.width),be=window.innerWidth-Y,Pe=Ke(N,[Y,Math.max(Y,be-je)]);c.style.minWidth=re+"px",c.style.left=Pe+"px"}else{const P=H.right-$.right,N=window.innerWidth-z.right-P,oe=window.innerWidth-M.right-N,re=M.width+oe,je=Math.max(re,H.width),be=window.innerWidth-Y,Pe=Ke(N,[Y,Math.max(Y,be-je)]);c.style.minWidth=re+"px",c.style.right=Pe+"px"}const R=y(),E=window.innerHeight-Y*2,U=p.scrollHeight,L=window.getComputedStyle(d),V=parseInt(L.borderTopWidth,10),O=parseInt(L.paddingTop,10),K=parseInt(L.borderBottomWidth,10),G=parseInt(L.paddingBottom,10),g=V+O+U+G+K,b=Math.min(m.offsetHeight*5,g),Q=window.getComputedStyle(p),ae=parseInt(Q.paddingTop,10),ye=parseInt(Q.paddingBottom,10),le=M.top+M.height/2-Y,fe=E-le,de=m.offsetHeight/2,w=m.offsetTop+de,T=V+O+w,B=g-T;if(T<=le){const P=R.length>0&&m===R[R.length-1].ref.current;c.style.bottom="0px";const N=d.clientHeight-p.offsetTop-p.offsetHeight,oe=Math.max(fe,de+(P?ye:0)+N+K),re=T+oe;c.style.height=re+"px"}else{const P=R.length>0&&m===R[0].ref.current;c.style.top="0px";const oe=Math.max(le,V+p.offsetTop+(P?ae:0)+de)+B;c.style.height=oe+"px",p.scrollTop=T-le+p.offsetTop}c.style.margin=`${Y}px 0`,c.style.minHeight=b+"px",c.style.maxHeight=E+"px",a==null||a(),requestAnimationFrame(()=>C.current=!0)}},[y,n.trigger,n.valueNode,c,d,p,m,j,n.dir,a]);Z(()=>x(),[x]);const[A,k]=l.useState();Z(()=>{d&&k(window.getComputedStyle(d).zIndex)},[d]);const te=l.useCallback(M=>{M&&v.current===!0&&(x(),f==null||f(),v.current=!1)},[x,f]);return e.jsx(gr,{scope:r,contentWrapper:c,shouldExpandOnScrollRef:C,onScrollButtonChange:te,children:e.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:e.jsx(F.div,{...s,ref:S,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});yt.displayName=hr;var mr="SelectPopperPosition",Ee=l.forwardRef((t,o)=>{const{__scopeSelect:r,align:a="start",collisionPadding:s=Y,...n}=t,i=Se(r);return e.jsx(it,{...i,...n,ref:o,align:a,collisionPadding:s,style:{boxSizing:"border-box",...n.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ee.displayName=mr;var[gr,He]=ce(ne,{}),De="SelectViewport",jt=l.forwardRef((t,o)=>{const{__scopeSelect:r,nonce:a,...s}=t,n=J(De,r),i=He(De,r),c=q(o,n.onViewportChange),u=l.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(ve.Slot,{scope:r,children:e.jsx(F.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:_(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:S,shouldExpandOnScrollRef:y}=i;if(y!=null&&y.current&&S){const C=Math.abs(u.current-h.scrollTop);if(C>0){const v=window.innerHeight-Y*2,p=parseFloat(S.style.minHeight),m=parseFloat(S.style.height),j=Math.max(p,m);if(j<v){const f=j+C,x=Math.min(v,f),A=f-x;S.style.height=x+"px",S.style.bottom==="0px"&&(h.scrollTop=A>0?A:0,S.style.justifyContent="flex-end")}}}u.current=h.scrollTop})})})]})});jt.displayName=De;var bt="SelectGroup",[xr,vr]=ce(bt),wr=l.forwardRef((t,o)=>{const{__scopeSelect:r,...a}=t,s=xe();return e.jsx(xr,{scope:r,id:s,children:e.jsx(F.div,{role:"group","aria-labelledby":s,...a,ref:o})})});wr.displayName=bt;var Pt="SelectLabel",Sr=l.forwardRef((t,o)=>{const{__scopeSelect:r,...a}=t,s=vr(Pt,r);return e.jsx(F.div,{id:s.id,...a,ref:o})});Sr.displayName=Pt;var me="SelectItem",[Cr,Nt]=ce(me),It=l.forwardRef((t,o)=>{const{__scopeSelect:r,value:a,disabled:s=!1,textValue:n,...i}=t,c=X(me,r),u=J(me,r),d=c.value===a,[h,S]=l.useState(n??""),[y,C]=l.useState(!1),v=q(o,f=>{var x;return(x=u.itemRefCallback)==null?void 0:x.call(u,f,a,s)}),p=xe(),m=l.useRef("touch"),j=()=>{s||(c.onValueChange(a),c.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Cr,{scope:r,value:a,disabled:s,textId:p,isSelected:d,onItemTextChange:l.useCallback(f=>{S(x=>x||((f==null?void 0:f.textContent)??"").trim())},[]),children:e.jsx(ve.ItemSlot,{scope:r,value:a,disabled:s,textValue:h,children:e.jsx(F.div,{role:"option","aria-labelledby":p,"data-highlighted":y?"":void 0,"aria-selected":d&&y,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:v,onFocus:_(i.onFocus,()=>C(!0)),onBlur:_(i.onBlur,()=>C(!1)),onClick:_(i.onClick,()=>{m.current!=="mouse"&&j()}),onPointerUp:_(i.onPointerUp,()=>{m.current==="mouse"&&j()}),onPointerDown:_(i.onPointerDown,f=>{m.current=f.pointerType}),onPointerMove:_(i.onPointerMove,f=>{var x;m.current=f.pointerType,s?(x=u.onItemLeave)==null||x.call(u):m.current==="mouse"&&f.currentTarget.focus({preventScroll:!0})}),onPointerLeave:_(i.onPointerLeave,f=>{var x;f.currentTarget===document.activeElement&&((x=u.onItemLeave)==null||x.call(u))}),onKeyDown:_(i.onKeyDown,f=>{var A;((A=u.searchRef)==null?void 0:A.current)!==""&&f.key===" "||(nr.includes(f.key)&&j(),f.key===" "&&f.preventDefault())})})})})});It.displayName=me;var ue="SelectItemText",Tt=l.forwardRef((t,o)=>{const{__scopeSelect:r,className:a,style:s,...n}=t,i=X(ue,r),c=J(ue,r),u=Nt(ue,r),d=cr(ue,r),[h,S]=l.useState(null),y=q(o,j=>S(j),u.onItemTextChange,j=>{var f;return(f=c.itemTextRefCallback)==null?void 0:f.call(c,j,u.value,u.disabled)}),C=h==null?void 0:h.textContent,v=l.useMemo(()=>e.jsx("option",{value:u.value,disabled:u.disabled,children:C},u.value),[u.disabled,u.value,C]),{onNativeOptionAdd:p,onNativeOptionRemove:m}=d;return Z(()=>(p(v),()=>m(v)),[p,m,v]),e.jsxs(e.Fragment,{children:[e.jsx(F.span,{id:u.textId,...n,ref:y}),u.isSelected&&i.valueNode&&!i.valueNodeHasChildren?Ge.createPortal(n.children,i.valueNode):null]})});Tt.displayName=ue;var _t="SelectItemIndicator",Rt=l.forwardRef((t,o)=>{const{__scopeSelect:r,...a}=t;return Nt(_t,r).isSelected?e.jsx(F.span,{"aria-hidden":!0,...a,ref:o}):null});Rt.displayName=_t;var Me="SelectScrollUpButton",Et=l.forwardRef((t,o)=>{const r=J(Me,t.__scopeSelect),a=He(Me,t.__scopeSelect),[s,n]=l.useState(!1),i=q(o,a.onScrollButtonChange);return Z(()=>{if(r.viewport&&r.isPositioned){let c=function(){const d=u.scrollTop>0;n(d)};const u=r.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),s?e.jsx(Mt,{...t,ref:i,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=r;c&&u&&(c.scrollTop=c.scrollTop-u.offsetHeight)}}):null});Et.displayName=Me;var Ae="SelectScrollDownButton",Dt=l.forwardRef((t,o)=>{const r=J(Ae,t.__scopeSelect),a=He(Ae,t.__scopeSelect),[s,n]=l.useState(!1),i=q(o,a.onScrollButtonChange);return Z(()=>{if(r.viewport&&r.isPositioned){let c=function(){const d=u.scrollHeight-u.clientHeight,h=Math.ceil(u.scrollTop)<d;n(h)};const u=r.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),s?e.jsx(Mt,{...t,ref:i,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=r;c&&u&&(c.scrollTop=c.scrollTop+u.offsetHeight)}}):null});Dt.displayName=Ae;var Mt=l.forwardRef((t,o)=>{const{__scopeSelect:r,onAutoScroll:a,...s}=t,n=J("SelectScrollButton",r),i=l.useRef(null),c=we(r),u=l.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return l.useEffect(()=>()=>u(),[u]),Z(()=>{var h;const d=c().find(S=>S.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[c]),e.jsx(F.div,{"aria-hidden":!0,...s,ref:o,style:{flexShrink:0,...s.style},onPointerDown:_(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(a,50))}),onPointerMove:_(s.onPointerMove,()=>{var d;(d=n.onItemLeave)==null||d.call(n),i.current===null&&(i.current=window.setInterval(a,50))}),onPointerLeave:_(s.onPointerLeave,()=>{u()})})}),yr="SelectSeparator",jr=l.forwardRef((t,o)=>{const{__scopeSelect:r,...a}=t;return e.jsx(F.div,{"aria-hidden":!0,...a,ref:o})});jr.displayName=yr;var Oe="SelectArrow",br=l.forwardRef((t,o)=>{const{__scopeSelect:r,...a}=t,s=Se(r),n=X(Oe,r),i=J(Oe,r);return n.open&&i.position==="popper"?e.jsx(ct,{...s,...a,ref:o}):null});br.displayName=Oe;var Pr="SelectBubbleInput",At=l.forwardRef(({__scopeSelect:t,value:o,...r},a)=>{const s=l.useRef(null),n=q(a,s),i=eo(o);return l.useEffect(()=>{const c=s.current;if(!c)return;const u=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(u,"value").set;if(i!==o&&h){const S=new Event("change",{bubbles:!0});h.call(c,o),c.dispatchEvent(S)}},[i,o]),e.jsx(F.select,{...r,style:{...Mo,...r.style},ref:n,defaultValue:o})});At.displayName=Pr;function Ot(t){return t===""||t===void 0}function kt(t){const o=Ao(t),r=l.useRef(""),a=l.useRef(0),s=l.useCallback(i=>{const c=r.current+i;o(c),function u(d){r.current=d,window.clearTimeout(a.current),d!==""&&(a.current=window.setTimeout(()=>u(""),1e3))}(c)},[o]),n=l.useCallback(()=>{r.current="",window.clearTimeout(a.current)},[]);return l.useEffect(()=>()=>window.clearTimeout(a.current),[]),[r,s,n]}function Ft(t,o,r){const s=o.length>1&&Array.from(o).every(d=>d===o[0])?o[0]:o,n=r?t.indexOf(r):-1;let i=Nr(t,Math.max(n,0));s.length===1&&(i=i.filter(d=>d!==r));const u=i.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return u!==r?u:void 0}function Nr(t,o){return t.map((r,a)=>t[(o+a)%t.length])}var Ir=pt,Tr=ht,_r=gt,Rr=xt,Er=vt,Dr=wt,Mr=jt,Ar=It,Or=Tt,kr=Rt,Fr=Et,Lr=Dt;function Lt({...t}){return e.jsx(Ir,{"data-slot":"select",...t})}function Vt({...t}){return e.jsx(_r,{"data-slot":"select-value",...t})}function Bt({className:t,size:o="default",children:r,...a}){return e.jsxs(Tr,{"data-slot":"select-trigger","data-size":o,className:D("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a,children:[r,e.jsx(Rr,{asChild:!0,children:e.jsx(ut,{className:"size-4 opacity-50"})})]})}function Ht({className:t,children:o,position:r="popper",...a}){return e.jsx(Er,{children:e.jsxs(Dr,{"data-slot":"select-content",className:D("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...a,children:[e.jsx(Vr,{}),e.jsx(Mr,{className:D("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:o}),e.jsx(Br,{})]})})}function ke({className:t,children:o,...r}){return e.jsxs(Ar,{"data-slot":"select-item",className:D("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(kr,{children:e.jsx(Oo,{className:"size-4"})})}),e.jsx(Or,{children:o})]})}function Vr({className:t,...o}){return e.jsx(Fr,{"data-slot":"select-scroll-up-button",className:D("flex cursor-default items-center justify-center py-1",t),...o,children:e.jsx(or,{className:"size-4"})})}function Br({className:t,...o}){return e.jsx(Lr,{"data-slot":"select-scroll-down-button",className:D("flex cursor-default items-center justify-center py-1",t),...o,children:e.jsx(ut,{className:"size-4"})})}const Hr=[10,20,30,40,50,100,200,500];function zr({table:t}){return e.jsxs("div",{className:"flex items-center justify-between overflow-clip px-2",style:{overflowClipMargin:1},children:[e.jsxs("div",{className:"text-muted-foreground hidden flex-1 text-sm sm:block",children:[t.getFilteredSelectedRowModel().rows.length," of"," ",t.getFilteredRowModel().rows.length," row(s) selected."]}),e.jsxs("div",{className:"flex items-center sm:space-x-6 lg:space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"hidden text-sm font-medium sm:block",children:"Rows per page"}),e.jsxs(Lt,{value:`${t.getState().pagination.pageSize}`,onValueChange:o=>{t.setPageSize(Number(o))},children:[e.jsx(Bt,{className:"h-8 w-[70px]",children:e.jsx(Vt,{placeholder:t.getState().pagination.pageSize})}),e.jsx(Ht,{side:"top",children:Hr.map(o=>e.jsx(ke,{value:`${o}`,children:o},o))})]})]}),e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",t.getState().pagination.pageIndex+1," of"," ",t.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(W,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>t.setPageIndex(0),disabled:!t.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(to,{className:"h-4 w-4"})]}),e.jsxs(W,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>t.previousPage(),disabled:!t.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(oo,{className:"h-4 w-4"})]}),e.jsxs(W,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>t.nextPage(),disabled:!t.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(ro,{className:"h-4 w-4"})]}),e.jsxs(W,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>t.setPageIndex(t.getPageCount()-1),disabled:!t.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(so,{className:"h-4 w-4"})]})]})]})]})}var Ce="Popover",[zt,Ss]=tt(Ce,[ge]),pe=ge(),[$r,ee]=zt(Ce),$t=t=>{const{__scopePopover:o,children:r,open:a,defaultOpen:s,onOpenChange:n,modal:i=!1}=t,c=pe(o),u=l.useRef(null),[d,h]=l.useState(!1),[S,y]=_e({prop:a,defaultProp:s??!1,onChange:n,caller:Ce});return e.jsx(et,{...c,children:e.jsx($r,{scope:o,contentId:xe(),triggerRef:u,open:S,onOpenChange:y,onOpenToggle:l.useCallback(()=>y(C=>!C),[y]),hasCustomAnchor:d,onCustomAnchorAdd:l.useCallback(()=>h(!0),[]),onCustomAnchorRemove:l.useCallback(()=>h(!1),[]),modal:i,children:r})})};$t.displayName=Ce;var Ut="PopoverAnchor",Ur=l.forwardRef((t,o)=>{const{__scopePopover:r,...a}=t,s=ee(Ut,r),n=pe(r),{onCustomAnchorAdd:i,onCustomAnchorRemove:c}=s;return l.useEffect(()=>(i(),()=>c()),[i,c]),e.jsx(Be,{...n,...a,ref:o})});Ur.displayName=Ut;var Kt="PopoverTrigger",Wt=l.forwardRef((t,o)=>{const{__scopePopover:r,...a}=t,s=ee(Kt,r),n=pe(r),i=q(o,s.triggerRef),c=e.jsx(F.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Zt(s.open),...a,ref:i,onClick:_(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?c:e.jsx(Be,{asChild:!0,...n,children:c})});Wt.displayName=Kt;var ze="PopoverPortal",[Kr,Wr]=zt(ze,{forceMount:void 0}),qt=t=>{const{__scopePopover:o,forceMount:r,children:a,container:s}=t,n=ee(ze,o);return e.jsx(Kr,{scope:o,forceMount:r,children:e.jsx(dt,{present:r||n.open,children:e.jsx(ot,{asChild:!0,container:s,children:a})})})};qt.displayName=ze;var ie="PopoverContent",Gt=l.forwardRef((t,o)=>{const r=Wr(ie,t.__scopePopover),{forceMount:a=r.forceMount,...s}=t,n=ee(ie,t.__scopePopover);return e.jsx(dt,{present:a||n.open,children:n.modal?e.jsx(Gr,{...s,ref:o}):e.jsx(Qr,{...s,ref:o})})});Gt.displayName=ie;var qr=Qe("PopoverContent.RemoveScroll"),Gr=l.forwardRef((t,o)=>{const r=ee(ie,t.__scopePopover),a=l.useRef(null),s=q(o,a),n=l.useRef(!1);return l.useEffect(()=>{const i=a.current;if(i)return rt(i)},[]),e.jsx(nt,{as:qr,allowPinchZoom:!0,children:e.jsx(Qt,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:_(t.onCloseAutoFocus,i=>{var c;i.preventDefault(),n.current||(c=r.triggerRef.current)==null||c.focus()}),onPointerDownOutside:_(t.onPointerDownOutside,i=>{const c=i.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;n.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:_(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),Qr=l.forwardRef((t,o)=>{const r=ee(ie,t.__scopePopover),a=l.useRef(!1),s=l.useRef(!1);return e.jsx(Qt,{...t,ref:o,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:n=>{var i,c;(i=t.onCloseAutoFocus)==null||i.call(t,n),n.defaultPrevented||(a.current||(c=r.triggerRef.current)==null||c.focus(),n.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:n=>{var u,d;(u=t.onInteractOutside)==null||u.call(t,n),n.defaultPrevented||(a.current=!0,n.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=n.target;((d=r.triggerRef.current)==null?void 0:d.contains(i))&&n.preventDefault(),n.detail.originalEvent.type==="focusin"&&s.current&&n.preventDefault()}})}),Qt=l.forwardRef((t,o)=>{const{__scopePopover:r,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:n,disableOutsidePointerEvents:i,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,...S}=t,y=ee(ie,r),C=pe(r);return st(),e.jsx(at,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:n,children:e.jsx(lt,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:h,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onDismiss:()=>y.onOpenChange(!1),children:e.jsx(it,{"data-state":Zt(y.open),role:"dialog",id:y.contentId,...C,...S,ref:o,style:{...S.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Yt="PopoverClose",Yr=l.forwardRef((t,o)=>{const{__scopePopover:r,...a}=t,s=ee(Yt,r);return e.jsx(F.button,{type:"button",...a,ref:o,onClick:_(t.onClick,()=>s.onOpenChange(!1))})});Yr.displayName=Yt;var Zr="PopoverArrow",Xr=l.forwardRef((t,o)=>{const{__scopePopover:r,...a}=t,s=pe(r);return e.jsx(ct,{...s,...a,ref:o})});Xr.displayName=Zr;function Zt(t){return t?"open":"closed"}var Jr=$t,es=Wt,ts=qt,os=Gt;function Fe({...t}){return e.jsx(Jr,{"data-slot":"popover",...t})}function Le({...t}){return e.jsx(es,{"data-slot":"popover-trigger",...t})}function Ve({className:t,align:o="center",sideOffset:r=4,...a}){return e.jsx(ts,{children:e.jsx(os,{"data-slot":"popover-content",align:o,sideOffset:r,className:D("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...a})})}function Xt(t,o=250){const r=l.useRef(null);return l.useCallback((...s)=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{t(...s)},o)},[t,o])}function rs({column:t,title:o}){var n;const r=t==null?void 0:t.getFacetedUniqueValues(),a=(t==null?void 0:t.columnDef.meta).filter,s=new Set(t==null?void 0:t.getFilterValue());if(a.type==="select"){const i=xo({queryKey:((n=a.query)==null?void 0:n.key)||[],queryFn:()=>{var d,h;return he({method:"GET",url:((d=a.query)==null?void 0:d.fetchOptionsUrl)||"",query:{page_size:12,disablePagination:!((h=a.query)!=null&&h.paginated)}})},enabled:!!a.query}),[c,u]=l.useState([]);return l.useEffect(()=>{let d=[];a.query?d=a.query.transformResponse(i.data||[]):d=a.options||[],u(d)},[i.data]),e.jsxs(Fe,{children:[e.jsx(Le,{asChild:!0,children:e.jsxs(W,{variant:"outline",size:"sm",className:"h-8 border-dashed",children:[e.jsx(no,{className:"h-4 w-4"}),o,(s==null?void 0:s.size)>0&&e.jsxs(e.Fragment,{children:[e.jsx(_o,{orientation:"vertical",className:"mx-2 h-4"}),e.jsx(Ie,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:s.size}),e.jsx("div",{className:"hidden space-x-1 lg:flex",children:s.size>2?e.jsxs(Ie,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[s.size," selected"]}):c.filter(d=>s.has(d.value)).map(d=>e.jsx(Ie,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:d.label},d.value))})]})]})}),e.jsx(Ve,{className:"w-[200px] p-0",align:"start",children:e.jsxs(vo,{children:[e.jsx(wo,{placeholder:o}),e.jsxs(So,{children:[e.jsx(Co,{children:"No results found."}),e.jsx(We,{children:c.map(d=>{const h=s.has(d.value);return e.jsxs(qe,{onSelect:()=>{h?s.delete(d.value):s.add(d.value);const S=Array.from(s);t==null||t.setFilterValue(S.length?S:void 0)},children:[e.jsx("div",{className:D("border-primary flex h-4 w-4 items-center justify-center rounded-sm border",h?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(ao,{className:D("h-4 w-4")})}),e.jsx("span",{children:d.label}),(r==null?void 0:r.get(d.value))&&e.jsx("span",{className:"ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs",children:r.get(d.value)})]},d.value)})}),s.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(yo,{}),e.jsx(We,{children:e.jsx(qe,{onSelect:()=>t==null?void 0:t.setFilterValue(void 0),className:"justify-center text-center",children:"Clear filters"})})]})]})]})})]})}else if(a.type==="text"){const[i,c]=l.useState(""),u=Xt(d=>{t==null||t.setFilterValue(d)},1e3);return l.useEffect(()=>{u(i)},[i,u]),e.jsxs(Fe,{children:[e.jsx(Le,{asChild:!0,children:e.jsxs(W,{variant:"outline",size:"sm",className:"h-8 border-dashed",children:[e.jsx(ko,{className:"h-4 w-4"}),o]})}),e.jsx(Ve,{className:"w-[200px] p-0",align:"start",children:e.jsx(Ye,{placeholder:"Filter...",value:i,onChange:d=>c(d.target.value),className:D("h-8 w-full",{"border-dashed bg-dark":t==null?void 0:t.getFilterValue(),"border-solid":!(t!=null&&t.getFilterValue())})})})]})}}function ss({table:t}){return e.jsxs(Fo,{modal:!1,children:[e.jsx(Lo,{asChild:!0,children:e.jsxs(W,{variant:"outline",size:"sm",className:"ml-auto hidden h-8 lg:flex",children:[e.jsx(lo,{className:"mr-2 h-4 w-4"}),"View"]})}),e.jsxs(Vo,{align:"end",className:"w-[150px]",children:[e.jsx(Bo,{children:"Toggle columns"}),e.jsx(Ho,{}),t.getAllColumns().filter(o=>typeof o.accessorFn<"u"&&o.getCanHide()).map(o=>e.jsx(zo,{className:"capitalize",checked:o.getIsVisible(),onCheckedChange:r=>o.toggleVisibility(!!r),children:o.columnDef.header?`${o.columnDef.header}`:`${o.id}`},o.id))]})]})}const ns=({table:t})=>{const[o,r]=l.useState(""),a=Xt(s=>{t.setGlobalFilter(s)},1e3);return l.useEffect(()=>{a(o)},[o,a]),e.jsx(Ye,{placeholder:"Search...",value:o,onChange:s=>r(s.target.value),className:"h-8 w-[150px] lg:w-[250px]"})};function as({table:t}){const o=t.getState().columnFilters.length>0,r=t.getAllColumns().filter(a=>{const s=a.columnDef.meta;return(s==null?void 0:s.filter)&&s.filter.displayType==="toolbar"});return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-1 flex-col-reverse items-start gap-y-2 sm:flex-row sm:items-center sm:space-x-2",children:[e.jsx(ns,{table:t}),e.jsx("div",{className:"flex gap-x-2",children:r.map(a=>{const s=a.columnDef.meta;return s!=null&&s.filter?e.jsx(rs,{column:a,title:a.columnDef.header},a.id):null})}),o&&e.jsxs(W,{variant:"ghost",onClick:()=>t.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["Reset",e.jsx(io,{className:"ml-2 h-4 w-4"})]})]}),e.jsx(ss,{table:t})]})}function ls({resource:t}){const{datatable:o,data:r}=t,a=o.table.getAllColumns();return e.jsxs("div",{className:"space-y-4",children:[e.jsx(as,{table:o.table}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(uo,{children:[e.jsx(po,{children:o.table.getHeaderGroups().map(s=>e.jsx(Ne,{children:s.headers.map(n=>{const i=l.useMemo(()=>{var c,u;return D((c=n.column.columnDef.meta)!=null&&c.sizeBorderStyle?D("drop-shadow-[0_1px_2px_rgb(0_0_0_/_0.1)] dark:drop-shadow-[0_1px_2px_rgb(255_255_255_/_0.1)] lg:drop-shadow-none","bg-background transition-colors duration-200 group-hover/row:bg-muted group-data-[state=selected]/row:bg-muted","sticky left-6 md:table-cell"):"",((u=n.column.columnDef.meta)==null?void 0:u.className)||"")},[n.column.columnDef.meta]);return e.jsx(fo,{colSpan:n.colSpan,className:i,children:n.isPlaceholder?null:n.column.getCanSort()?e.jsx(ho,{column:n.column,title:String(n.column.columnDef.header)}):$e(n.column.columnDef.header,n.getContext())},n.id)})},s.id))}),e.jsx(mo,{children:r.length>0?o.table.getRowModel().rows.map(s=>e.jsx(Ne,{"data-state":s.getIsSelected()&&"selected",className:"group/row",children:s.getVisibleCells().map(n=>{var c,u;const i=D((c=n.column.columnDef.meta)!=null&&c.sizeBorderStyle?D("drop-shadow-[0_1px_2px_rgb(0_0_0_/_0.1)] dark:drop-shadow-[0_1px_2px_rgb(255_255_255_/_0.1)] lg:drop-shadow-none","bg-background transition-colors duration-200 group-hover/row:bg-muted group-data-[state=selected]/row:bg-muted","sticky left-6 md:table-cell"):"",((u=n.column.columnDef.meta)==null?void 0:u.className)||"");return e.jsx(Ue,{className:i,children:$e(n.column.columnDef.cell,n.getContext())},n.id)})},s.id)):e.jsx(Ne,{children:e.jsx(Ue,{colSpan:a.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsx(zr,{table:o.table})]})}function Cs({actions:t,resource:o,topbar:r}){const a=l.useMemo(()=>(t==null?void 0:t.filter(s=>s.renderType==="panel"))||[],[t]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between space-y-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:r.title}),e.jsx("p",{className:"text-muted-foreground",children:r.subtitle})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(co,{actions:t||[]}),a.map((s,n)=>e.jsxs(W,{size:"sm",onClick:s.callback,disabled:s.loading,children:[s.shortcutIcon," ",e.jsx("span",{children:s.label})]},n))]})]}),e.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-y-0 lg:space-x-12",children:e.jsx(ls,{resource:o})})]})}function ys({children:t,className:o="",contentClassName:r=""}){const a=l.useRef(null),[s,n]=l.useState(!1);return l.useEffect(()=>{if(is(a.current)){n(!0);return}n(!1)},[]),s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden sm:block",children:e.jsx($o,{delayDuration:0,children:e.jsxs(Uo,{children:[e.jsx(Ko,{asChild:!0,children:e.jsx("div",{ref:a,className:D("truncate",o),children:t})}),e.jsx(Wo,{children:e.jsx("p",{className:r,children:t})})]})})}),e.jsx("div",{className:"sm:hidden",children:e.jsxs(Fe,{children:[e.jsx(Le,{asChild:!0,children:e.jsx("div",{ref:a,className:D("truncate",o),children:t})}),e.jsx(Ve,{className:D("w-fit",r),children:e.jsx("p",{children:t})})]})})]}):e.jsx("div",{ref:a,className:D("truncate",o),children:t})}const is=t=>t?t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth:!1;function js(t){const{schema:o,defaultValues:r,transformToApi:a=v=>v,fetchFn:s,notifications:n,onSuccess:i}=t,[c,u]=l.useState(null),d=Ze({resolver:Xe(o),defaultValues:r,mode:"onChange"}),h={success:(v,p)=>{var m;(m=n==null?void 0:n.onSuccess)==null||m.call(n,v,p)},error:(v,p)=>{var j;const m=p instanceof Error?p:new Error(v);u(m),(j=n==null?void 0:n.onError)==null||j.call(n,v,p)},loading:v=>{var p;(p=n==null?void 0:n.onLoading)==null||p.call(n,v)}},S=Te({mutationFn:async v=>{const p=a(v);return await s(p)},onMutate:()=>{h.loading("Saving...")},onSuccess:v=>{h.success("Saved successfully"),i==null||i(v)},onError:v=>{Re(v)}}),y=d.handleSubmit(v=>{S.mutate(v)},()=>{u(new Error("Form validation failed"))}),C=l.useCallback(()=>{d.reset(r),u(null)},[r]);return{form:d,handleSubmit:y,handleReset:C,isSubmitting:S.isPending,mutation:S,error:c,setError:u}}const bs=({url:t})=>({get:async o=>he({url:`${t}/${o}/`,method:"GET"}),create:async o=>he({url:`${t}/`,method:"POST",body:o}),update:async(o,r)=>he({url:`${t}/${o}/`,method:"PATCH",body:r})});function Ps(t){const{schema:o,defaultValues:r,initialMode:a="create",initialRecord:s=null,recordId:n,transformToForm:i=(g,b)=>g,transformToApi:c=g=>g,switchToEditOnCreate:u=!0,apiService:d,onCreateSuccess:h,onUpdateSuccess:S,onLoadSuccess:y,notifications:C,queryKey:v="records",invalidateQueriesOnMutate:p=!0}=t,[m,j]=l.useState(a),[f,x]=l.useState(n),[A,k]=l.useState(s),[te,M]=l.useState(!1),[H,z]=l.useState(null),$=Jt(),R=Ze({resolver:o?Xe(o):void 0,defaultValues:r,mode:"onChange"}),E={success:(g,b)=>{var Q;(Q=C==null?void 0:C.onSuccess)==null||Q.call(C,g,b)},error:(g,b)=>{var ae;const Q=b instanceof Error?b:new Error(g);z(Q),(ae=C==null?void 0:C.onError)==null||ae.call(C,g,b)},loading:g=>{var b;(b=C==null?void 0:C.onLoading)==null||b.call(C,g)}},U=Te({mutationFn:async g=>{if(!d)throw new Error("API service not provided");const b=c(g);return await d.create(b)},onMutate:()=>{E.loading("Creating record...")},onSuccess:g=>{k(g),x(g.id),E.success("Record created successfully",g),u&&(j("edit"),R.reset(i(g,{action:"post"}))),p&&$.invalidateQueries({queryKey:[v]}),h==null||h(g)},onError:g=>{Re(g,{form:R})}}),L=Te({mutationFn:async g=>{if(!d)throw new Error("API service not provided");const b=c(g);return await d.update(f,b)},onMutate:()=>{E.loading("Updating record...")},onSuccess:g=>{k(g),E.success("Record updated successfully",g),p&&($.invalidateQueries({queryKey:[v,g.id]}),$.invalidateQueries({queryKey:[v]})),S==null||S(g)},onError:g=>{Re(g,{form:R})}});l.useEffect(()=>{f&&d&&(m==="edit"||m==="view")&&V(f).catch(g=>E.error("Failed to load record",g))},[f,m]),l.useEffect(()=>{n?(m==="create"&&j("edit"),f!==n&&x(n)):(R.reset(r||{}),j("create"))},[n]);const V=async g=>{if(!d)throw new Error("API service not provided");M(!0),E.loading("Loading record...");try{const b=await d.get(g);return k(b),x(b.id),m!=="create"&&R.reset(i(b,{action:"load"})),y==null||y(b),$.setQueryData([v,g],b),b}catch(b){throw E.error("Failed to load record",b),b}finally{M(!1)}},O=R.handleSubmit(g=>{m==="edit"?L.mutate(g):U.mutate(g)},()=>{E.error("Form validation failed")}),K=l.useCallback(()=>{m==="create"?R.reset(r||{}):A?R.reset(i(A,{action:"reset"})):R.reset(),z(null)},[m,A,r]),G=l.useCallback(async g=>{const b=g||f;if(!b)return E.error("No record ID provided"),Promise.reject(new Error("No record ID provided"));try{await V(b)}catch(Q){return Promise.reject(Q)}},[f]);return{form:R,formMode:m,setFormMode:j,recordId:f,setRecordId:x,record:A,isLoading:te,isSubmitting:U.isPending||L.isPending,isViewMode:m==="view",error:H,setError:z,handleSubmit:O,handleReset:K,handleLoad:G,loadRecord:V,createMutation:U,updateMutation:L}}const Ns=({formName:t,formHook:o,modal:r,displayType:a,getTitle:s,isProcessing:n=!1,children:i,getSubmitButtonText:c})=>{const u=l.useMemo(()=>c?c(o):o.formMode==="create"?"Create":"Save Changes",[o,c]),d=l.useMemo(()=>s(o),[s,o]);if(a==="dialog")return e.jsx(jo,{open:r.visible,onOpenChange:h=>{h||r.hide(),o.form.reset()},children:e.jsx(bo,{className:"sm:max-w-lg",children:e.jsxs("form",{id:t,onSubmit:o.handleSubmit,children:[e.jsxs(Po,{className:"text-left",children:[e.jsx(No,{children:d}),e.jsx(Io,{children:"Click save when you are done."})]}),e.jsx("div",{className:"-mr-4 w-full overflow-y-auto pt-4 pr-4",children:typeof i=="function"?i(o.form):i}),e.jsx(To,{children:e.jsx(W,{type:"submit",form:t,disabled:n,children:u})})]})})});if(a==="drawer")return e.jsx(qo,{open:r.visible,onOpenChange:h=>{h||r.hide(),o.form.reset()},children:e.jsx(Go,{className:"flex flex-col",children:e.jsxs("form",{onSubmit:o.handleSubmit,children:[e.jsxs(Qo,{className:"text-left",children:[e.jsx(Yo,{children:d}),e.jsx(Zo,{children:"Click save when you are done."})]}),typeof i=="function"?i(o.form):i,e.jsxs(Xo,{className:"gap-2",children:[e.jsx(Jo,{asChild:!0,children:e.jsx(W,{variant:"outline",children:"Close"})}),e.jsx(W,{form:t,type:"submit",disabled:n,children:u})]})]})})})};function Is({defaultValue:t,onValueChange:o,isPending:r,items:a,placeholder:s,disabled:n,className:i="",isControlled:c=!1}){const u=c?{value:t,onValueChange:o}:{defaultValue:t,onValueChange:o};return e.jsxs(Lt,{...u,children:[e.jsx(Ro,{children:e.jsx(Bt,{disabled:n,className:D(i),children:e.jsx(Vt,{placeholder:s??"Select"})})}),e.jsx(Ht,{children:r?e.jsx(ke,{disabled:!0,value:"loading",className:"h-14",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(rr,{className:"h-5 w-5 animate-spin"}),"  ","Loading..."]})}):a==null?void 0:a.map(({label:d,value:h})=>e.jsx(ke,{value:h,children:d},h))})]})}export{Ns as C,Cs as D,ys as L,Is as S,Ps as a,bs as c,js as u};
