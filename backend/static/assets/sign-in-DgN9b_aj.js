import{j as e,r as x}from"./index-BFkE31IL.js";import{C as N,a as C,b as k,c as I,d as S}from"./card-BnRcE97p.js";import{u as E,A as F}from"./use-auth-DHccd34A.js";import{a as w,c as y,B as b}from"./createReactComponent-D3fbIqZl.js";import{u as M,F as P,a as h,b as p,c as f,d as g,e as j,s as L,z as l}from"./index-RzghFC-a.js";import{I as A,u as B}from"./use-custom-toast-CqH72_jF.js";/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var z=w("outline","eye-off","IconEyeOff",[["path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828",key:"svg-0"}],["path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var R=w("outline","eye","IconEye",[["path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6",key:"svg-1"}]]);function T({children:r}){return e.jsx("div",{className:"bg-primary-foreground container grid h-svh max-w-none items-center justify-center",children:e.jsxs("div",{className:"mx-auto flex w-full flex-col justify-center space-y-2 py-8 sm:w-[480px] sm:p-8",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2 h-6 w-6",children:e.jsx("path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3"})}),e.jsx("h1",{className:"text-xl font-medium",children:"Shadcn Admin"})]}),r]})})}const v=x.forwardRef(({className:r,disabled:o,...n},i)=>{const[t,s]=x.useState(!1);return e.jsxs("div",{className:y("relative rounded-md",r),children:[e.jsx("input",{type:t?"text":"password",className:"border-input placeholder:text-muted-foreground focus-visible:ring-ring flex h-9 w-full rounded-md border bg-transparent px-3 py-1 text-sm shadow-xs transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:ring-1 focus-visible:outline-hidden disabled:cursor-not-allowed disabled:opacity-50",ref:i,disabled:o,...n}),e.jsx(b,{type:"button",size:"icon",variant:"ghost",disabled:o,className:"text-muted-foreground absolute top-1/2 right-1 h-6 w-6 -translate-y-1/2 rounded-md",onClick:()=>s(c=>!c),children:t?e.jsx(R,{size:18}):e.jsx(z,{size:18})})]})});v.displayName="PasswordInput";const H=l.object({username:l.string().min(1,{message:"Please enter your username"}),password:l.string().min(1,{message:"Please enter your password"}).min(7,{message:"Password must be at least 7 characters long"})});function O({className:r,...o}){const{loginMutation:n,resetError:i}=E(),{showErrorToast:t}=B(),s=M({resolver:L(H),defaultValues:{username:"",password:""},mode:"onBlur",criteriaMode:"all"}),c=async a=>{var m;if(!s.formState.isSubmitting){i();try{await n.mutateAsync(a)}catch(d){if(d instanceof F&&d.message==="Bad Request"){const u=(m=d.body)==null?void 0:m.errors;t(u?{title:"Login failed",description:u}:{title:"Login failed",description:"Invalid username or password"})}}}};return e.jsx(P,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(c),className:y("grid gap-3",r),...o,children:[e.jsx(h,{control:s.control,name:"username",render:({field:a})=>e.jsxs(p,{children:[e.jsx(f,{children:"Username"}),e.jsx(g,{children:e.jsx(A,{placeholder:"admin",...a})}),e.jsx(j,{})]})}),e.jsx(h,{control:s.control,name:"password",render:({field:a})=>e.jsxs(p,{className:"relative",children:[e.jsx(f,{children:"Password"}),e.jsx(g,{children:e.jsx(v,{placeholder:"********",...a})}),e.jsx(j,{})]})}),e.jsx(b,{className:"mt-2",disabled:n.isPending,children:"Login"})]})})}function U(){return e.jsx(T,{children:e.jsxs(N,{className:"gap-4",children:[e.jsxs(C,{children:[e.jsx(k,{className:"text-lg tracking-tight",children:"Login"}),e.jsxs(I,{children:["Enter your email and password below to ",e.jsx("br",{}),"log into your account"]})]}),e.jsx(S,{children:e.jsx(O,{})})]})})}const K=U;export{K as component};
