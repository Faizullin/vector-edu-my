import{r,j as e,c as De,d as ct,e as dt}from"./index-BFkE31IL.js";import{a as ut,D as pt,C as ft,b as mt,d as ht,e as gt,f as xt,T as vt,g as St,h as Se,i as wt,j as Pe,k as yt,l as bt,m as _e,P as Ct,n as jt,o as Nt}from"./use-resource-DK3NFxGu.js";import{u as Z,P as U,b as It,c as B,B as J}from"./createReactComponent-D3fbIqZl.js";import{c as Ee,D as Tt,a as Pt,b as _t,d as Et,e as Rt,f as Mt}from"./search-context-Cmagidv2.js";import{c as Ae,H as Oe,F as Dt,u as Re,J as At,a as Ot,b as Ie,K as kt,L as Lt,d as D,e as ee,M as Bt,V as Vt,N as Ft,O as Ht,Q as zt,T as Ut,U as Wt,W as Kt,X as $t,Y as Gt,Z as qt,_ as Yt,$ as Qt,a0 as Zt,a1 as Xt,a2 as Jt,a3 as eo,a4 as to,a5 as oo,a6 as so,a7 as ro,a8 as no}from"./IconSun-DCedqkE3.js";import{a as Me,s as we}from"./use-auth-DHccd34A.js";import{u as ao,s as lo}from"./index-RzghFC-a.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ke=Ae("chevron-down",io);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],uo=Ae("chevron-up",co);var po=[" ","Enter","ArrowUp","ArrowDown"],fo=[" ","Enter"],ne="Select",[fe,me,mo]=kt(ne),[ie,us]=Ot(ne,[mo,Oe]),he=Oe(),[ho,te]=ie(ne),[go,xo]=ie(ne),Le=t=>{const{__scopeSelect:s,children:o,open:d,defaultOpen:n,onOpenChange:a,value:l,defaultValue:i,onValueChange:c,dir:f,name:v,autoComplete:b,disabled:T,required:P,form:S}=t,p=he(s),[w,x]=r.useState(null),[m,h]=r.useState(null),[A,R]=r.useState(!1),X=Dt(f),[O,V]=Re({prop:d,defaultProp:n??!1,onChange:a,caller:ne}),[Y,K]=Re({prop:l,defaultProp:i,onChange:c,caller:ne}),k=r.useRef(null),N=w?S||!!w.closest("form"):!0,[E,W]=r.useState(new Set),F=Array.from(E).map(M=>M.props.value).join(";");return e.jsx(At,{...p,children:e.jsxs(ho,{required:P,scope:s,trigger:w,onTriggerChange:x,valueNode:m,onValueNodeChange:h,valueNodeHasChildren:A,onValueNodeHasChildrenChange:R,contentId:Ie(),value:Y,onValueChange:K,open:O,onOpenChange:V,dir:X,triggerPointerDownPosRef:k,disabled:T,children:[e.jsx(fe.Provider,{scope:s,children:e.jsx(go,{scope:t.__scopeSelect,onNativeOptionAdd:r.useCallback(M=>{W(L=>new Set(L).add(M))},[]),onNativeOptionRemove:r.useCallback(M=>{W(L=>{const $=new Set(L);return $.delete(M),$})},[]),children:o})}),N?e.jsxs(nt,{"aria-hidden":!0,required:P,tabIndex:-1,name:v,autoComplete:b,value:Y,onChange:M=>K(M.target.value),disabled:T,form:S,children:[Y===void 0?e.jsx("option",{value:""}):null,Array.from(E)]},F):null]})})};Le.displayName=ne;var Be="SelectTrigger",Ve=r.forwardRef((t,s)=>{const{__scopeSelect:o,disabled:d=!1,...n}=t,a=he(o),l=te(Be,o),i=l.disabled||d,c=Z(s,l.onTriggerChange),f=me(o),v=r.useRef("touch"),[b,T,P]=lt(p=>{const w=f().filter(h=>!h.disabled),x=w.find(h=>h.value===l.value),m=it(w,p,x);m!==void 0&&l.onValueChange(m.value)}),S=p=>{i||(l.onOpenChange(!0),P()),p&&(l.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return e.jsx(Lt,{asChild:!0,...a,children:e.jsx(U.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:i,"data-disabled":i?"":void 0,"data-placeholder":at(l.value)?"":void 0,...n,ref:c,onClick:D(n.onClick,p=>{p.currentTarget.focus(),v.current!=="mouse"&&S(p)}),onPointerDown:D(n.onPointerDown,p=>{v.current=p.pointerType;const w=p.target;w.hasPointerCapture(p.pointerId)&&w.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(S(p),p.preventDefault())}),onKeyDown:D(n.onKeyDown,p=>{const w=b.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&T(p.key),!(w&&p.key===" ")&&po.includes(p.key)&&(S(),p.preventDefault())})})})});Ve.displayName=Be;var Fe="SelectValue",He=r.forwardRef((t,s)=>{const{__scopeSelect:o,className:d,style:n,children:a,placeholder:l="",...i}=t,c=te(Fe,o),{onValueNodeHasChildrenChange:f}=c,v=a!==void 0,b=Z(s,c.onValueNodeChange);return ee(()=>{f(v)},[f,v]),e.jsx(U.span,{...i,ref:b,style:{pointerEvents:"none"},children:at(c.value)?e.jsx(e.Fragment,{children:l}):a})});He.displayName=Fe;var vo="SelectIcon",ze=r.forwardRef((t,s)=>{const{__scopeSelect:o,children:d,...n}=t;return e.jsx(U.span,{"aria-hidden":!0,...n,ref:s,children:d||"â–¼"})});ze.displayName=vo;var So="SelectPortal",Ue=t=>e.jsx(Bt,{asChild:!0,...t});Ue.displayName=So;var ae="SelectContent",We=r.forwardRef((t,s)=>{const o=te(ae,t.__scopeSelect),[d,n]=r.useState();if(ee(()=>{n(new DocumentFragment)},[]),!o.open){const a=d;return a?De.createPortal(e.jsx(Ke,{scope:t.__scopeSelect,children:e.jsx(fe.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),a):null}return e.jsx($e,{...t,ref:s})});We.displayName=ae;var q=10,[Ke,oe]=ie(ae),wo="SelectContentImpl",yo=It("SelectContent.RemoveScroll"),$e=r.forwardRef((t,s)=>{const{__scopeSelect:o,position:d="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:a,onPointerDownOutside:l,side:i,sideOffset:c,align:f,alignOffset:v,arrowPadding:b,collisionBoundary:T,collisionPadding:P,sticky:S,hideWhenDetached:p,avoidCollisions:w,...x}=t,m=te(ae,o),[h,A]=r.useState(null),[R,X]=r.useState(null),O=Z(s,g=>A(g)),[V,Y]=r.useState(null),[K,k]=r.useState(null),N=me(o),[E,W]=r.useState(!1),F=r.useRef(!1);r.useEffect(()=>{if(h)return Ht(h)},[h]),zt();const M=r.useCallback(g=>{const[_,...z]=N().map(j=>j.ref.current),[I]=z.slice(-1),C=document.activeElement;for(const j of g)if(j===C||(j==null||j.scrollIntoView({block:"nearest"}),j===_&&R&&(R.scrollTop=0),j===I&&R&&(R.scrollTop=R.scrollHeight),j==null||j.focus(),document.activeElement!==C))return},[N,R]),L=r.useCallback(()=>M([V,h]),[M,V,h]);r.useEffect(()=>{E&&L()},[E,L]);const{onOpenChange:$,triggerPointerDownPosRef:Q}=m;r.useEffect(()=>{if(h){let g={x:0,y:0};const _=I=>{var C,j;g={x:Math.abs(Math.round(I.pageX)-(((C=Q.current)==null?void 0:C.x)??0)),y:Math.abs(Math.round(I.pageY)-(((j=Q.current)==null?void 0:j.y)??0))}},z=I=>{g.x<=10&&g.y<=10?I.preventDefault():h.contains(I.target)||$(!1),document.removeEventListener("pointermove",_),Q.current=null};return Q.current!==null&&(document.addEventListener("pointermove",_),document.addEventListener("pointerup",z,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",_),document.removeEventListener("pointerup",z,{capture:!0})}}},[h,$,Q]),r.useEffect(()=>{const g=()=>$(!1);return window.addEventListener("blur",g),window.addEventListener("resize",g),()=>{window.removeEventListener("blur",g),window.removeEventListener("resize",g)}},[$]);const[ce,u]=lt(g=>{const _=N().filter(C=>!C.disabled),z=_.find(C=>C.ref.current===document.activeElement),I=it(_,g,z);I&&setTimeout(()=>I.ref.current.focus())}),y=r.useCallback((g,_,z)=>{const I=!F.current&&!z;(m.value!==void 0&&m.value===_||I)&&(Y(g),I&&(F.current=!0))},[m.value]),G=r.useCallback(()=>h==null?void 0:h.focus(),[h]),H=r.useCallback((g,_,z)=>{const I=!F.current&&!z;(m.value!==void 0&&m.value===_||I)&&k(g)},[m.value]),le=d==="popper"?ye:Ge,de=le===ye?{side:i,sideOffset:c,align:f,alignOffset:v,arrowPadding:b,collisionBoundary:T,collisionPadding:P,sticky:S,hideWhenDetached:p,avoidCollisions:w}:{};return e.jsx(Ke,{scope:o,content:h,viewport:R,onViewportChange:X,itemRefCallback:y,selectedItem:V,onItemLeave:G,itemTextRefCallback:H,focusSelectedItem:L,selectedItemText:K,position:d,isPositioned:E,searchRef:ce,children:e.jsx(Ut,{as:yo,allowPinchZoom:!0,children:e.jsx(Wt,{asChild:!0,trapped:m.open,onMountAutoFocus:g=>{g.preventDefault()},onUnmountAutoFocus:D(n,g=>{var _;(_=m.trigger)==null||_.focus({preventScroll:!0}),g.preventDefault()}),children:e.jsx(Kt,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:g=>g.preventDefault(),onDismiss:()=>m.onOpenChange(!1),children:e.jsx(le,{role:"listbox",id:m.contentId,"data-state":m.open?"open":"closed",dir:m.dir,onContextMenu:g=>g.preventDefault(),...x,...de,onPlaced:()=>W(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:D(x.onKeyDown,g=>{const _=g.ctrlKey||g.altKey||g.metaKey;if(g.key==="Tab"&&g.preventDefault(),!_&&g.key.length===1&&u(g.key),["ArrowUp","ArrowDown","Home","End"].includes(g.key)){let I=N().filter(C=>!C.disabled).map(C=>C.ref.current);if(["ArrowUp","End"].includes(g.key)&&(I=I.slice().reverse()),["ArrowUp","ArrowDown"].includes(g.key)){const C=g.target,j=I.indexOf(C);I=I.slice(j+1)}setTimeout(()=>M(I)),g.preventDefault()}})})})})})})});$e.displayName=wo;var bo="SelectItemAlignedPosition",Ge=r.forwardRef((t,s)=>{const{__scopeSelect:o,onPlaced:d,...n}=t,a=te(ae,o),l=oe(ae,o),[i,c]=r.useState(null),[f,v]=r.useState(null),b=Z(s,O=>v(O)),T=me(o),P=r.useRef(!1),S=r.useRef(!0),{viewport:p,selectedItem:w,selectedItemText:x,focusSelectedItem:m}=l,h=r.useCallback(()=>{if(a.trigger&&a.valueNode&&i&&f&&p&&w&&x){const O=a.trigger.getBoundingClientRect(),V=f.getBoundingClientRect(),Y=a.valueNode.getBoundingClientRect(),K=x.getBoundingClientRect();if(a.dir!=="rtl"){const C=K.left-V.left,j=Y.left-C,se=O.left-j,re=O.width+se,ge=Math.max(re,V.width),xe=window.innerWidth-q,ve=Ee(j,[q,Math.max(q,xe-ge)]);i.style.minWidth=re+"px",i.style.left=ve+"px"}else{const C=V.right-K.right,j=window.innerWidth-Y.right-C,se=window.innerWidth-O.right-j,re=O.width+se,ge=Math.max(re,V.width),xe=window.innerWidth-q,ve=Ee(j,[q,Math.max(q,xe-ge)]);i.style.minWidth=re+"px",i.style.right=ve+"px"}const k=T(),N=window.innerHeight-q*2,E=p.scrollHeight,W=window.getComputedStyle(f),F=parseInt(W.borderTopWidth,10),M=parseInt(W.paddingTop,10),L=parseInt(W.borderBottomWidth,10),$=parseInt(W.paddingBottom,10),Q=F+M+E+$+L,ce=Math.min(w.offsetHeight*5,Q),u=window.getComputedStyle(p),y=parseInt(u.paddingTop,10),G=parseInt(u.paddingBottom,10),H=O.top+O.height/2-q,le=N-H,de=w.offsetHeight/2,g=w.offsetTop+de,_=F+M+g,z=Q-_;if(_<=H){const C=k.length>0&&w===k[k.length-1].ref.current;i.style.bottom="0px";const j=f.clientHeight-p.offsetTop-p.offsetHeight,se=Math.max(le,de+(C?G:0)+j+L),re=_+se;i.style.height=re+"px"}else{const C=k.length>0&&w===k[0].ref.current;i.style.top="0px";const se=Math.max(H,F+p.offsetTop+(C?y:0)+de)+z;i.style.height=se+"px",p.scrollTop=_-H+p.offsetTop}i.style.margin=`${q}px 0`,i.style.minHeight=ce+"px",i.style.maxHeight=N+"px",d==null||d(),requestAnimationFrame(()=>P.current=!0)}},[T,a.trigger,a.valueNode,i,f,p,w,x,a.dir,d]);ee(()=>h(),[h]);const[A,R]=r.useState();ee(()=>{f&&R(window.getComputedStyle(f).zIndex)},[f]);const X=r.useCallback(O=>{O&&S.current===!0&&(h(),m==null||m(),S.current=!1)},[h,m]);return e.jsx(jo,{scope:o,contentWrapper:i,shouldExpandOnScrollRef:P,onScrollButtonChange:X,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:e.jsx(U.div,{...n,ref:b,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});Ge.displayName=bo;var Co="SelectPopperPosition",ye=r.forwardRef((t,s)=>{const{__scopeSelect:o,align:d="start",collisionPadding:n=q,...a}=t,l=he(o);return e.jsx($t,{...l,...a,ref:s,align:d,collisionPadding:n,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ye.displayName=Co;var[jo,Te]=ie(ae,{}),be="SelectViewport",qe=r.forwardRef((t,s)=>{const{__scopeSelect:o,nonce:d,...n}=t,a=oe(be,o),l=Te(be,o),i=Z(s,a.onViewportChange),c=r.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:d}),e.jsx(fe.Slot,{scope:o,children:e.jsx(U.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:i,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:D(n.onScroll,f=>{const v=f.currentTarget,{contentWrapper:b,shouldExpandOnScrollRef:T}=l;if(T!=null&&T.current&&b){const P=Math.abs(c.current-v.scrollTop);if(P>0){const S=window.innerHeight-q*2,p=parseFloat(b.style.minHeight),w=parseFloat(b.style.height),x=Math.max(p,w);if(x<S){const m=x+P,h=Math.min(S,m),A=m-h;b.style.height=h+"px",b.style.bottom==="0px"&&(v.scrollTop=A>0?A:0,b.style.justifyContent="flex-end")}}}c.current=v.scrollTop})})})]})});qe.displayName=be;var Ye="SelectGroup",[No,Io]=ie(Ye),To=r.forwardRef((t,s)=>{const{__scopeSelect:o,...d}=t,n=Ie();return e.jsx(No,{scope:o,id:n,children:e.jsx(U.div,{role:"group","aria-labelledby":n,...d,ref:s})})});To.displayName=Ye;var Qe="SelectLabel",Po=r.forwardRef((t,s)=>{const{__scopeSelect:o,...d}=t,n=Io(Qe,o);return e.jsx(U.div,{id:n.id,...d,ref:s})});Po.displayName=Qe;var pe="SelectItem",[_o,Ze]=ie(pe),Xe=r.forwardRef((t,s)=>{const{__scopeSelect:o,value:d,disabled:n=!1,textValue:a,...l}=t,i=te(pe,o),c=oe(pe,o),f=i.value===d,[v,b]=r.useState(a??""),[T,P]=r.useState(!1),S=Z(s,m=>{var h;return(h=c.itemRefCallback)==null?void 0:h.call(c,m,d,n)}),p=Ie(),w=r.useRef("touch"),x=()=>{n||(i.onValueChange(d),i.onOpenChange(!1))};if(d==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(_o,{scope:o,value:d,disabled:n,textId:p,isSelected:f,onItemTextChange:r.useCallback(m=>{b(h=>h||((m==null?void 0:m.textContent)??"").trim())},[]),children:e.jsx(fe.ItemSlot,{scope:o,value:d,disabled:n,textValue:v,children:e.jsx(U.div,{role:"option","aria-labelledby":p,"data-highlighted":T?"":void 0,"aria-selected":f&&T,"data-state":f?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...l,ref:S,onFocus:D(l.onFocus,()=>P(!0)),onBlur:D(l.onBlur,()=>P(!1)),onClick:D(l.onClick,()=>{w.current!=="mouse"&&x()}),onPointerUp:D(l.onPointerUp,()=>{w.current==="mouse"&&x()}),onPointerDown:D(l.onPointerDown,m=>{w.current=m.pointerType}),onPointerMove:D(l.onPointerMove,m=>{var h;w.current=m.pointerType,n?(h=c.onItemLeave)==null||h.call(c):w.current==="mouse"&&m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:D(l.onPointerLeave,m=>{var h;m.currentTarget===document.activeElement&&((h=c.onItemLeave)==null||h.call(c))}),onKeyDown:D(l.onKeyDown,m=>{var A;((A=c.searchRef)==null?void 0:A.current)!==""&&m.key===" "||(fo.includes(m.key)&&x(),m.key===" "&&m.preventDefault())})})})})});Xe.displayName=pe;var ue="SelectItemText",Je=r.forwardRef((t,s)=>{const{__scopeSelect:o,className:d,style:n,...a}=t,l=te(ue,o),i=oe(ue,o),c=Ze(ue,o),f=xo(ue,o),[v,b]=r.useState(null),T=Z(s,x=>b(x),c.onItemTextChange,x=>{var m;return(m=i.itemTextRefCallback)==null?void 0:m.call(i,x,c.value,c.disabled)}),P=v==null?void 0:v.textContent,S=r.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:P},c.value),[c.disabled,c.value,P]),{onNativeOptionAdd:p,onNativeOptionRemove:w}=f;return ee(()=>(p(S),()=>w(S)),[p,w,S]),e.jsxs(e.Fragment,{children:[e.jsx(U.span,{id:c.textId,...a,ref:T}),c.isSelected&&l.valueNode&&!l.valueNodeHasChildren?De.createPortal(a.children,l.valueNode):null]})});Je.displayName=ue;var et="SelectItemIndicator",tt=r.forwardRef((t,s)=>{const{__scopeSelect:o,...d}=t;return Ze(et,o).isSelected?e.jsx(U.span,{"aria-hidden":!0,...d,ref:s}):null});tt.displayName=et;var Ce="SelectScrollUpButton",ot=r.forwardRef((t,s)=>{const o=oe(Ce,t.__scopeSelect),d=Te(Ce,t.__scopeSelect),[n,a]=r.useState(!1),l=Z(s,d.onScrollButtonChange);return ee(()=>{if(o.viewport&&o.isPositioned){let i=function(){const f=c.scrollTop>0;a(f)};const c=o.viewport;return i(),c.addEventListener("scroll",i),()=>c.removeEventListener("scroll",i)}},[o.viewport,o.isPositioned]),n?e.jsx(rt,{...t,ref:l,onAutoScroll:()=>{const{viewport:i,selectedItem:c}=o;i&&c&&(i.scrollTop=i.scrollTop-c.offsetHeight)}}):null});ot.displayName=Ce;var je="SelectScrollDownButton",st=r.forwardRef((t,s)=>{const o=oe(je,t.__scopeSelect),d=Te(je,t.__scopeSelect),[n,a]=r.useState(!1),l=Z(s,d.onScrollButtonChange);return ee(()=>{if(o.viewport&&o.isPositioned){let i=function(){const f=c.scrollHeight-c.clientHeight,v=Math.ceil(c.scrollTop)<f;a(v)};const c=o.viewport;return i(),c.addEventListener("scroll",i),()=>c.removeEventListener("scroll",i)}},[o.viewport,o.isPositioned]),n?e.jsx(rt,{...t,ref:l,onAutoScroll:()=>{const{viewport:i,selectedItem:c}=o;i&&c&&(i.scrollTop=i.scrollTop+c.offsetHeight)}}):null});st.displayName=je;var rt=r.forwardRef((t,s)=>{const{__scopeSelect:o,onAutoScroll:d,...n}=t,a=oe("SelectScrollButton",o),l=r.useRef(null),i=me(o),c=r.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return r.useEffect(()=>()=>c(),[c]),ee(()=>{var v;const f=i().find(b=>b.ref.current===document.activeElement);(v=f==null?void 0:f.ref.current)==null||v.scrollIntoView({block:"nearest"})},[i]),e.jsx(U.div,{"aria-hidden":!0,...n,ref:s,style:{flexShrink:0,...n.style},onPointerDown:D(n.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(d,50))}),onPointerMove:D(n.onPointerMove,()=>{var f;(f=a.onItemLeave)==null||f.call(a),l.current===null&&(l.current=window.setInterval(d,50))}),onPointerLeave:D(n.onPointerLeave,()=>{c()})})}),Eo="SelectSeparator",Ro=r.forwardRef((t,s)=>{const{__scopeSelect:o,...d}=t;return e.jsx(U.div,{"aria-hidden":!0,...d,ref:s})});Ro.displayName=Eo;var Ne="SelectArrow",Mo=r.forwardRef((t,s)=>{const{__scopeSelect:o,...d}=t,n=he(o),a=te(Ne,o),l=oe(Ne,o);return a.open&&l.position==="popper"?e.jsx(Gt,{...n,...d,ref:s}):null});Mo.displayName=Ne;var Do="SelectBubbleInput",nt=r.forwardRef(({__scopeSelect:t,value:s,...o},d)=>{const n=r.useRef(null),a=Z(d,n),l=ut(s);return r.useEffect(()=>{const i=n.current;if(!i)return;const c=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(c,"value").set;if(l!==s&&v){const b=new Event("change",{bubbles:!0});v.call(i,s),i.dispatchEvent(b)}},[l,s]),e.jsx(U.select,{...o,style:{...Vt,...o.style},ref:a,defaultValue:s})});nt.displayName=Do;function at(t){return t===""||t===void 0}function lt(t){const s=Ft(t),o=r.useRef(""),d=r.useRef(0),n=r.useCallback(l=>{const i=o.current+l;s(i),function c(f){o.current=f,window.clearTimeout(d.current),f!==""&&(d.current=window.setTimeout(()=>c(""),1e3))}(i)},[s]),a=r.useCallback(()=>{o.current="",window.clearTimeout(d.current)},[]);return r.useEffect(()=>()=>window.clearTimeout(d.current),[]),[o,n,a]}function it(t,s,o){const n=s.length>1&&Array.from(s).every(f=>f===s[0])?s[0]:s,a=o?t.indexOf(o):-1;let l=Ao(t,Math.max(a,0));n.length===1&&(l=l.filter(f=>f!==o));const c=l.find(f=>f.textValue.toLowerCase().startsWith(n.toLowerCase()));return c!==o?c:void 0}function Ao(t,s){return t.map((o,d)=>t[(s+d)%t.length])}var Oo=Le,ko=Ve,Lo=He,Bo=ze,Vo=Ue,Fo=We,Ho=qe,zo=Xe,Uo=Je,Wo=tt,Ko=ot,$o=st;function Go({...t}){return e.jsx(Oo,{"data-slot":"select",...t})}function qo({...t}){return e.jsx(Lo,{"data-slot":"select-value",...t})}function Yo({className:t,size:s="default",children:o,...d}){return e.jsxs(ko,{"data-slot":"select-trigger","data-size":s,className:B("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...d,children:[o,e.jsx(Bo,{asChild:!0,children:e.jsx(ke,{className:"size-4 opacity-50"})})]})}function Qo({className:t,children:s,position:o="popper",...d}){return e.jsx(Vo,{children:e.jsxs(Fo,{"data-slot":"select-content",className:B("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",o==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:o,...d,children:[e.jsx(Xo,{}),e.jsx(Ho,{className:B("p-1",o==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(Jo,{})]})})}function Zo({className:t,children:s,...o}){return e.jsxs(zo,{"data-slot":"select-item",className:B("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...o,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(Wo,{children:e.jsx(qt,{className:"size-4"})})}),e.jsx(Uo,{children:s})]})}function Xo({className:t,...s}){return e.jsx(Ko,{"data-slot":"select-scroll-up-button",className:B("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(uo,{className:"size-4"})})}function Jo({className:t,...s}){return e.jsx($o,{"data-slot":"select-scroll-down-button",className:B("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(ke,{className:"size-4"})})}const es=[10,20,30,40,50,100,200,500];function ts({table:t}){return e.jsxs("div",{className:"flex items-center justify-between overflow-clip px-2",style:{overflowClipMargin:1},children:[e.jsxs("div",{className:"text-muted-foreground hidden flex-1 text-sm sm:block",children:[t.getFilteredSelectedRowModel().rows.length," of"," ",t.getFilteredRowModel().rows.length," row(s) selected."]}),e.jsxs("div",{className:"flex items-center sm:space-x-6 lg:space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"hidden text-sm font-medium sm:block",children:"Rows per page"}),e.jsxs(Go,{value:`${t.getState().pagination.pageSize}`,onValueChange:s=>{t.setPageSize(Number(s))},children:[e.jsx(Yo,{className:"h-8 w-[70px]",children:e.jsx(qo,{placeholder:t.getState().pagination.pageSize})}),e.jsx(Qo,{side:"top",children:es.map(s=>e.jsx(Zo,{value:`${s}`,children:s},s))})]})]}),e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",t.getState().pagination.pageIndex+1," of"," ",t.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(J,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>t.setPageIndex(0),disabled:!t.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(pt,{className:"h-4 w-4"})]}),e.jsxs(J,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>t.previousPage(),disabled:!t.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(ft,{className:"h-4 w-4"})]}),e.jsxs(J,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>t.nextPage(),disabled:!t.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(mt,{className:"h-4 w-4"})]}),e.jsxs(J,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>t.setPageIndex(t.getPageCount()-1),disabled:!t.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(ht,{className:"h-4 w-4"})]})]})]})]})}function os({resource:t}){const{datatable:s,data:o}=t,d=s.table.getAllColumns();return e.jsxs("div",{className:"space-y-4",children:[e.jsx(xt,{table:s.table}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(vt,{children:[e.jsx(St,{children:s.table.getHeaderGroups().map(n=>e.jsx(Se,{children:n.headers.map(a=>{const l=r.useMemo(()=>{var i,c;return B((i=a.column.columnDef.meta)!=null&&i.sizeBorderStyle?B("drop-shadow-[0_1px_2px_rgb(0_0_0_/_0.1)] dark:drop-shadow-[0_1px_2px_rgb(255_255_255_/_0.1)] lg:drop-shadow-none","bg-background transition-colors duration-200 group-hover/row:bg-muted group-data-[state=selected]/row:bg-muted","sticky left-6 md:table-cell"):"",((c=a.column.columnDef.meta)==null?void 0:c.className)||"")},[a.column.columnDef.meta]);return e.jsx(wt,{colSpan:a.colSpan,className:l,children:a.isPlaceholder?null:a.column.getCanSort()?e.jsx(yt,{column:a.column,title:String(a.column.columnDef.header)}):Pe(a.column.columnDef.header,a.getContext())},a.id)})},n.id))}),e.jsx(bt,{children:o.length>0?s.table.getRowModel().rows.map(n=>e.jsx(Se,{"data-state":n.getIsSelected()&&"selected",className:"group/row",children:n.getVisibleCells().map(a=>{var i,c;const l=B((i=a.column.columnDef.meta)!=null&&i.sizeBorderStyle?B("drop-shadow-[0_1px_2px_rgb(0_0_0_/_0.1)] dark:drop-shadow-[0_1px_2px_rgb(255_255_255_/_0.1)] lg:drop-shadow-none","bg-background transition-colors duration-200 group-hover/row:bg-muted group-data-[state=selected]/row:bg-muted","sticky left-6 md:table-cell"):"",((c=a.column.columnDef.meta)==null?void 0:c.className)||"");return e.jsx(_e,{className:l,children:Pe(a.column.columnDef.cell,a.getContext())},a.id)})},n.id)):e.jsx(Se,{children:e.jsx(_e,{colSpan:d.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsx(ts,{table:s.table})]})}function ps({actions:t,resource:s,topbar:o}){const d=r.useMemo(()=>(t==null?void 0:t.filter(n=>n.renderType==="panel"))||[],[t]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between space-y-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:o.title}),e.jsx("p",{className:"text-muted-foreground",children:o.subtitle})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(gt,{actions:t||[]}),d.map((n,a)=>e.jsxs(J,{size:"sm",onClick:n.callback,disabled:n.loading,children:[n.shortcutIcon," ",e.jsx("span",{children:n.label})]},a))]})]}),e.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-y-0 lg:space-x-12",children:e.jsx(os,{resource:s})})]})}function fs({children:t,className:s="",contentClassName:o=""}){const d=r.useRef(null),[n,a]=r.useState(!1);return r.useEffect(()=>{if(ss(d.current)){a(!0);return}a(!1)},[]),n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden sm:block",children:e.jsx(Yt,{delayDuration:0,children:e.jsxs(Qt,{children:[e.jsx(Zt,{asChild:!0,children:e.jsx("div",{ref:d,className:B("truncate",s),children:t})}),e.jsx(Xt,{children:e.jsx("p",{className:o,children:t})})]})})}),e.jsx("div",{className:"sm:hidden",children:e.jsxs(Ct,{children:[e.jsx(jt,{asChild:!0,children:e.jsx("div",{ref:d,className:B("truncate",s),children:t})}),e.jsx(Nt,{className:B("w-fit",o),children:e.jsx("p",{children:t})})]})})]}):e.jsx("div",{ref:d,className:B("truncate",s),children:t})}const ss=t=>t?t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth:!1,ms=({url:t})=>({get:async s=>we({url:`${t}/${s}/`,method:"GET"}),create:async s=>we({url:`${t}/`,method:"POST",body:s}),update:async(s,o)=>we({url:`${t}/${s}/`,method:"PATCH",body:o})});function hs(t){const{schema:s,defaultValues:o,initialMode:d="create",initialRecord:n=null,recordId:a,transformToForm:l=u=>u,transformToApi:i=u=>u,switchToEditOnCreate:c=!0,resetOnModeChange:f=!0,apiService:v,onCreateSuccess:b,onUpdateSuccess:T,onLoadSuccess:P,notifications:S,queryKey:p="records",invalidateQueriesOnMutate:w=!0}=t,[x,m]=r.useState(d),[h,A]=r.useState(a),[R,X]=r.useState(n),[O,V]=r.useState(!1),[Y,K]=r.useState(null),k=ct(),N=ao({resolver:s?lo(s):void 0,defaultValues:o,mode:"onChange"}),E={success:(u,y)=>{var G;(G=S==null?void 0:S.onSuccess)==null||G.call(S,u,y)},error:(u,y)=>{var H;const G=y instanceof Error?y:new Error(u);K(G),(H=S==null?void 0:S.onError)==null||H.call(S,u,y)},loading:u=>{var y;(y=S==null?void 0:S.onLoading)==null||y.call(S,u)}},W=u=>{var y;dt.error("Server error:",u.name,u.message),u.message==="Bad Request"&&(((y=u.body)==null?void 0:y.type)==="validation_error"?(u.body.errors.forEach(H=>{const le=H.attr;H.detail&&N.setError(le,{type:"manual",message:H.detail})}),E.error("Failed to create record",u)):u.body.error&&E.error("Failed to save",u.body.error))},F=Me({mutationFn:async u=>{if(!v)throw new Error("API service not provided");const y=i(u);return await v.create(y)},onMutate:()=>{E.loading("Creating record...")},onSuccess:u=>{X(u),A(u.id),E.success("Record created successfully",u),c&&(m("edit"),N.reset(l(u))),w&&k.invalidateQueries({queryKey:[p]}),b==null||b(u)},onError:u=>{W(u)}}),M=Me({mutationFn:async u=>{if(!v)throw new Error("API service not provided");const y=i(u);return await v.update(h,y)},onMutate:()=>{E.loading("Updating record...")},onSuccess:u=>{X(u),E.success("Record updated successfully",u),w&&(k.invalidateQueries({queryKey:[p,u.id]}),k.invalidateQueries({queryKey:[p]})),T==null||T(u)},onError:u=>{W(u)}});r.useEffect(()=>{f&&(x==="create"?N.reset(o||{}):x==="edit"&&R&&N.reset(l(R))),x==="view"&&Object.keys(N.getValues()).forEach(u=>{N.register(u,{disabled:!0})})},[x,R]),r.useEffect(()=>{h&&v&&(x==="edit"||x==="view")&&L(h).catch(u=>E.error("Failed to load record",u))},[h,x]),r.useEffect(()=>{a?(x==="create"&&m("edit"),h!==a&&A(a)):(N.reset(o||{}),m("create"))},[a]);const L=async u=>{if(!v)throw new Error("API service not provided");V(!0),E.loading("Loading record...");try{const y=await v.get(u);return X(y),A(y.id),x!=="create"&&N.reset(l(y)),P==null||P(y),k.setQueryData([p,u],y),y}catch(y){throw E.error("Failed to load record",y),y}finally{V(!1)}},$=N.handleSubmit(u=>{x==="edit"?M.mutate(u):F.mutate(u)},()=>{E.error("Form validation failed")}),Q=r.useCallback(()=>{x==="create"?N.reset(o||{}):R?N.reset(l(R)):N.reset(),K(null)},[x,R,o]),ce=r.useCallback(async u=>{const y=u||h;if(!y)return E.error("No record ID provided"),Promise.reject(new Error("No record ID provided"));try{await L(y)}catch(G){return Promise.reject(G)}},[h]);return{form:N,formMode:x,setFormMode:m,recordId:h,setRecordId:A,record:R,isLoading:O,isSubmitting:F.isPending||M.isPending,isViewMode:x==="view",error:Y,setError:K,handleSubmit:$,handleReset:Q,handleLoad:ce,loadRecord:L,createMutation:F,updateMutation:M}}const gs=({formName:t,formHook:s,modal:o,displayType:d,getTitle:n,isProcessing:a=!1,children:l,getSubmitButtonText:i})=>{const c=r.useMemo(()=>i?i(s.formMode):s.formMode==="create"?"Create":"Save Changes",[s.formMode,i]);if(d==="dialog")return e.jsx(Tt,{open:o.visible,onOpenChange:f=>{f||o.hide(),s.form.reset()},children:e.jsx(Pt,{className:"sm:max-w-lg",children:e.jsxs("form",{id:t,onSubmit:s.handleSubmit,children:[e.jsxs(_t,{className:"text-left",children:[e.jsx(Et,{children:n(s.formMode)}),e.jsx(Rt,{children:"Click save when you are done."})]}),e.jsx("div",{className:"-mr-4 w-full overflow-y-auto pt-4 pr-4",children:typeof l=="function"?l(s.form):l}),e.jsx(Mt,{children:e.jsx(J,{type:"submit",form:t,disabled:a,children:c})})]})})});if(d==="drawer")return e.jsx(Jt,{open:o.visible,onOpenChange:f=>{f||o.hide(),s.form.reset()},children:e.jsx(eo,{className:"flex flex-col",children:e.jsxs("form",{onSubmit:s.handleSubmit,children:[e.jsxs(to,{className:"text-left",children:[e.jsx(oo,{children:n(s.formMode)}),e.jsx(so,{children:"Click save when you are done."})]}),typeof l=="function"?l(s.form):l,e.jsxs(ro,{className:"gap-2",children:[e.jsx(no,{asChild:!0,children:e.jsx(J,{variant:"outline",children:"Close"})}),e.jsx(J,{form:t,type:"submit",disabled:a,children:c})]})]})})})};export{gs as C,ps as D,fs as L,Go as S,Yo as a,qo as b,ms as c,Qo as d,Zo as e,hs as u};
