import{r as v,j as a,k as re,I as oe,i as ce,a as le,a5 as de,H as B,x as E,B as te}from"./main-CUfsI3AY.js";import{l as he}from"./lodash-CVgaKlHN.js";import{T as fe}from"./Table-I26n7k9G.js";import{S as me}from"./Spinner-B_7WowvM.js";const ne=v.forwardRef(({active:h=!1,disabled:N=!1,className:S,style:x,activeLabel:C="(current)",children:y,linkStyle:D,linkClassName:b,as:w=oe,...p},Y)=>{const f=h||N?"span":w;return a.jsx("li",{ref:Y,style:x,className:re(S,"page-item",{active:h,disabled:N}),children:a.jsxs(f,{className:re("page-link",b),style:D,...p,children:[y,h&&C&&a.jsx("span",{className:"visually-hidden",children:C})]})})});ne.displayName="PageItem";function q(h,N,S=h){const x=v.forwardRef(({children:C,...y},D)=>a.jsxs(ne,{...y,ref:D,children:[a.jsx("span",{"aria-hidden":"true",children:C||N}),a.jsx("span",{className:"visually-hidden",children:S})]}));return x.displayName=h,x}const pe=q("First","Â«"),$e=q("Prev","â€¹","Previous"),ge=q("Ellipsis","â€¦","More"),xe=q("Next","â€º"),ye=q("Last","Â»"),ie=v.forwardRef(({bsPrefix:h,className:N,size:S,...x},C)=>{const y=ce(h,"pagination");return a.jsx("ul",{ref:C,...x,className:re(N,y,S&&`${y}-${S}`)})});ie.displayName="Pagination";const X=Object.assign(ie,{First:pe,Prev:$e,Ellipsis:ge,Item:ne,Next:xe,Last:ye});var ue={exports:{}};(function(h,N){(function(S,x){h.exports=x()})(de,function(){var S=1e3,x=6e4,C=36e5,y="millisecond",D="second",b="minute",w="hour",p="day",Y="week",f="month",G="quarter",j="year",O="date",T="Invalid Date",R=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,U=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,se={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var r=["th","st","nd","rd"],t=e%100;return"["+e+(r[(t-20)%10]||r[t]||r[0])+"]"}},V=function(e,r,t){var s=String(e);return!s||s.length>=r?e:""+Array(r+1-s.length).join(t)+e},ee={s:V,z:function(e){var r=-e.utcOffset(),t=Math.abs(r),s=Math.floor(t/60),n=t%60;return(r<=0?"+":"-")+V(s,2,"0")+":"+V(n,2,"0")},m:function e(r,t){if(r.date()<t.date())return-e(t,r);var s=12*(t.year()-r.year())+(t.month()-r.month()),n=r.clone().add(s,f),u=t-n<0,o=r.clone().add(s+(u?-1:1),f);return+(-(s+(t-n)/(u?n-o:o-n))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:f,y:j,w:Y,d:p,D:O,h:w,m:b,s:D,ms:y,Q:G}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return e===void 0}},H="en",_={};_[H]=se;var Z="$isDayjsObject",A=function(e){return e instanceof F||!(!e||!e[Z])},W=function e(r,t,s){var n;if(!r)return H;if(typeof r=="string"){var u=r.toLowerCase();_[u]&&(n=u),t&&(_[u]=t,n=u);var o=r.split("-");if(!n&&o.length>1)return e(o[0])}else{var l=r.name;_[l]=r,n=l}return!s&&n&&(H=n),n||!s&&H},d=function(e,r){if(A(e))return e.clone();var t=typeof r=="object"?r:{};return t.date=e,t.args=arguments,new F(t)},c=ee;c.l=W,c.i=A,c.w=function(e,r){return d(e,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var F=function(){function e(t){this.$L=W(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[Z]=!0}var r=e.prototype;return r.parse=function(t){this.$d=function(s){var n=s.date,u=s.utc;if(n===null)return new Date(NaN);if(c.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){var o=n.match(R);if(o){var l=o[2]-1||0,m=(o[7]||"0").substring(0,3);return u?new Date(Date.UTC(o[1],l,o[3]||1,o[4]||0,o[5]||0,o[6]||0,m)):new Date(o[1],l,o[3]||1,o[4]||0,o[5]||0,o[6]||0,m)}}return new Date(n)}(t),this.init()},r.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},r.$utils=function(){return c},r.isValid=function(){return this.$d.toString()!==T},r.isSame=function(t,s){var n=d(t);return this.startOf(s)<=n&&n<=this.endOf(s)},r.isAfter=function(t,s){return d(t)<this.startOf(s)},r.isBefore=function(t,s){return this.endOf(s)<d(t)},r.$g=function(t,s,n){return c.u(t)?this[s]:this.set(n,t)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(t,s){var n=this,u=!!c.u(s)||s,o=c.p(t),l=function(L,M){var P=c.w(n.$u?Date.UTC(n.$y,M,L):new Date(n.$y,M,L),n);return u?P:P.endOf(p)},m=function(L,M){return c.w(n.toDate()[L].apply(n.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(M)),n)},$=this.$W,g=this.$M,k=this.$D,z="set"+(this.$u?"UTC":"");switch(o){case j:return u?l(1,0):l(31,11);case f:return u?l(1,g):l(0,g+1);case Y:var I=this.$locale().weekStart||0,J=($<I?$+7:$)-I;return l(u?k-J:k+(6-J),g);case p:case O:return m(z+"Hours",0);case w:return m(z+"Minutes",1);case b:return m(z+"Seconds",2);case D:return m(z+"Milliseconds",3);default:return this.clone()}},r.endOf=function(t){return this.startOf(t,!1)},r.$set=function(t,s){var n,u=c.p(t),o="set"+(this.$u?"UTC":""),l=(n={},n[p]=o+"Date",n[O]=o+"Date",n[f]=o+"Month",n[j]=o+"FullYear",n[w]=o+"Hours",n[b]=o+"Minutes",n[D]=o+"Seconds",n[y]=o+"Milliseconds",n)[u],m=u===p?this.$D+(s-this.$W):s;if(u===f||u===j){var $=this.clone().set(O,1);$.$d[l](m),$.init(),this.$d=$.set(O,Math.min(this.$D,$.daysInMonth())).$d}else l&&this.$d[l](m);return this.init(),this},r.set=function(t,s){return this.clone().$set(t,s)},r.get=function(t){return this[c.p(t)]()},r.add=function(t,s){var n,u=this;t=Number(t);var o=c.p(s),l=function(g){var k=d(u);return c.w(k.date(k.date()+Math.round(g*t)),u)};if(o===f)return this.set(f,this.$M+t);if(o===j)return this.set(j,this.$y+t);if(o===p)return l(1);if(o===Y)return l(7);var m=(n={},n[b]=x,n[w]=C,n[D]=S,n)[o]||1,$=this.$d.getTime()+t*m;return c.w($,this)},r.subtract=function(t,s){return this.add(-1*t,s)},r.format=function(t){var s=this,n=this.$locale();if(!this.isValid())return n.invalidDate||T;var u=t||"YYYY-MM-DDTHH:mm:ssZ",o=c.z(this),l=this.$H,m=this.$m,$=this.$M,g=n.weekdays,k=n.months,z=n.meridiem,I=function(M,P,K,Q){return M&&(M[P]||M(s,u))||K[P].slice(0,Q)},J=function(M){return c.s(l%12||12,M,"0")},L=z||function(M,P,K){var Q=M<12?"AM":"PM";return K?Q.toLowerCase():Q};return u.replace(U,function(M,P){return P||function(K){switch(K){case"YY":return String(s.$y).slice(-2);case"YYYY":return c.s(s.$y,4,"0");case"M":return $+1;case"MM":return c.s($+1,2,"0");case"MMM":return I(n.monthsShort,$,k,3);case"MMMM":return I(k,$);case"D":return s.$D;case"DD":return c.s(s.$D,2,"0");case"d":return String(s.$W);case"dd":return I(n.weekdaysMin,s.$W,g,2);case"ddd":return I(n.weekdaysShort,s.$W,g,3);case"dddd":return g[s.$W];case"H":return String(l);case"HH":return c.s(l,2,"0");case"h":return J(1);case"hh":return J(2);case"a":return L(l,m,!0);case"A":return L(l,m,!1);case"m":return String(m);case"mm":return c.s(m,2,"0");case"s":return String(s.$s);case"ss":return c.s(s.$s,2,"0");case"SSS":return c.s(s.$ms,3,"0");case"Z":return o}return null}(M)||o.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(t,s,n){var u,o=this,l=c.p(s),m=d(t),$=(m.utcOffset()-this.utcOffset())*x,g=this-m,k=function(){return c.m(o,m)};switch(l){case j:u=k()/12;break;case f:u=k();break;case G:u=k()/3;break;case Y:u=(g-$)/6048e5;break;case p:u=(g-$)/864e5;break;case w:u=g/C;break;case b:u=g/x;break;case D:u=g/S;break;default:u=g}return n?u:c.a(u)},r.daysInMonth=function(){return this.endOf(f).$D},r.$locale=function(){return _[this.$L]},r.locale=function(t,s){if(!t)return this.$L;var n=this.clone(),u=W(t,s,!0);return u&&(n.$L=u),n},r.clone=function(){return c.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},e}(),i=F.prototype;return d.prototype=i,[["$ms",y],["$s",D],["$m",b],["$H",w],["$W",p],["$M",f],["$y",j],["$D",O]].forEach(function(e){i[e[1]]=function(r){return this.$g(r,e[0],e[1])}}),d.extend=function(e,r){return e.$i||(e(r,F,d),e.$i=!0),d},d.locale=W,d.isDayjs=A,d.unix=function(e){return d(1e3*e)},d.en=_[H],d.Ls=_,d.p={},d})})(ue);var ve=ue.exports;const ae=le(ve),je=h=>ae(h,{format:"YYYY-MM-DDTHH:mm:ssZ",strict:!0}).isValid()?ae(h).format("DD/MM/YYYY HH:mm"):h,we=v.memo(({control:h,columns:N,data:S,loading:x,onFilterChange:C,extraActions:y,totalPages:D,onEdit:b,onDelete:w})=>{const[p,Y]=v.useState({}),[f,G]=v.useState(null),[j,O]=v.useState("asc"),[T,R]=v.useState(1),[U,se]=v.useState(10),[V,ee]=v.useState(null),{totalPages:H,loading:_}=v.useMemo(()=>h?{totalPages:h.totalPages,loading:h.loading}:{totalPages:D,loading:x},[h,D,x]),Z=v.useMemo(()=>h?h.data||[]:S||[],[h,S]),A=v.useMemo(()=>he.debounce(()=>{C({...p,ordering:f?j==="asc"?f:`-${f}`:null,page:T,page_size:U})},500),[p,f,j,T,U]);v.useEffect(()=>{A()},[p,f,j,T,U]);const W=i=>{f===i?O(j==="asc"?"desc":"asc"):(G(i),O("asc"))},d=(i,e)=>{Y(r=>({...r,[i]:e})),R(1)},c=(i,e)=>i.dataType==="datetime"?je(e[i.key]):i.render?i.render(e):e[i.key],F=v.useMemo(()=>Z.filter(i=>Object.keys(p).every(e=>{var s,n;if(!p[e])return!0;const r=(s=i[e])==null?void 0:s.toString().toLowerCase(),t=(n=p[e])==null?void 0:n.toString().toLowerCase();return Array.isArray(p[e])?p[e].includes(i[e]):r&&r.includes(t)})),[Z,p]);return a.jsxs("div",{children:[a.jsxs(fe,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[a.jsx("thead",{children:a.jsxs("tr",{children:[N.map(i=>a.jsx("th",{className:"position-relative",children:a.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[a.jsxs("span",{onClick:()=>i.sortable&&W(i.key),style:{cursor:"pointer"},children:[i.label," ",i.sortable&&(f===i.key?j==="asc"?"â–²":"â–¼":"â†•")]}),i.filterType&&a.jsxs(B,{show:V===i.key,onToggle:()=>ee(i.key),children:[a.jsx(B.Toggle,{variant:"light",size:"sm",children:"ðŸ”"}),a.jsx(B.Menu,{className:"p-3",style:{minWidth:"250px"},children:a.jsxs(E,{children:[i.filterType==="text"&&a.jsx(E.Control,{type:"text",placeholder:`Filter ${i.label}`,onChange:e=>d(i.key,e.target.value)}),i.filterType==="select"&&i.options&&a.jsxs(E.Select,{onChange:e=>d(i.key,e.target.value),children:[a.jsx("option",{value:"",children:"All"}),i.options.map(e=>a.jsx("option",{value:e,children:e},e))]}),i.filterType==="date"&&a.jsx(E.Control,{type:"date",onChange:e=>d(i.key,e.target.value)}),i.filterType==="number-range"&&a.jsxs("div",{className:"d-flex",children:[a.jsx(E.Control,{type:"number",placeholder:"Min",onChange:e=>d(`${i.key}_min`,e.target.value)}),a.jsx(E.Control,{type:"number",placeholder:"Max",className:"ms-2",onChange:e=>d(`${i.key}_max`,e.target.value)})]}),a.jsx(te,{variant:"primary",className:"mt-2 w-100",onClick:()=>A(),children:"Apply Filters"})]})})]})]})},i.key)),(b||w||y)&&a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:_?a.jsx("tr",{children:a.jsx("td",{colSpan:N.length+1,className:"text-center",children:a.jsx(me,{animation:"border"})})}):F.length>0?F.map((i,e)=>a.jsxs("tr",{children:[N.map(r=>a.jsx("td",{children:c(r,i)},`${e}-${r.key}`)),(b||w||y)&&a.jsx("td",{children:a.jsxs("div",{className:"d-flex align-items-center",children:[b&&a.jsx(te,{size:"sm",variant:"primary",className:"me-1",onClick:()=>b(i),children:a.jsx("i",{className:"fa fa-pencil-alt"})}),w&&a.jsx(te,{size:"sm",variant:"danger",className:"me-1",onClick:()=>w(i),children:a.jsx("i",{className:"fa fa-trash"})}),y&&a.jsxs(B,{children:[a.jsx(B.Toggle,{variant:"light",size:"sm",children:a.jsx("i",{className:"fa fa-ellipsis"})}),a.jsx(B.Menu,{children:y(i)})]})]})})]},e)):a.jsx("tr",{children:a.jsx("td",{colSpan:N.length+1,className:"text-center",children:"No data available"})})})]}),a.jsxs(X,{children:[a.jsx(X.Prev,{disabled:T===1,onClick:()=>R(i=>Math.max(i-1,1))}),a.jsx(X.Item,{active:!0,children:T}),a.jsx(X.Next,{disabled:T>=H,onClick:()=>R(i=>i+1)})]})]})});export{we as D};
