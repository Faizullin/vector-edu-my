import{N as m,j as e,z as p,s as d,r as y}from"./index-BNIGZ_sb.js";import{S as g,c as x,L as f,u as h,D as b}from"./select-dropdown-C0aPmqop.js";import{H as j,T,P as S,M as _}from"./theme-switch-B3jb4bE2.js";import{S as w}from"./search-BmgROrh8.js";import{B as N}from"./badge-Pr4EMxX3.js";import{c as v}from"./index-CnYdjC-F.js";import{u as F,C,a as k}from"./use-custom-toast-DfXnhnWV.js";import{F as M,a as P,b as D,c as H,d as L,e as R}from"./zod-CBN5pmrC.js";import{c as U}from"./dropdown-menu-CE0Hsqy3.js";import"./search-context-DMPW8H4z.js";import"./scroll-area-DaoqWUtW.js";import"./IconSun-CD4UHluS.js";import"./createReactComponent-Bxh2tW4K.js";import"./separator-Ca3_S96s.js";import"./use-auth-CDgyCKtq.js";import"./useMutation-Bi3RyDN5.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]],E=U("toggle-left",B),c=[{label:"Бесплатный",value:"free"},{label:"Оплаченный",value:"paid"},{label:"Премиум оплаченный",value:"premium_paid"}],V=p.object({user_type:p.enum(c.map(a=>a.value),{required_error:"User type is required."})}),q=m.create(({userIds:a})=>{const l=m.useModal(),{showSuccessToast:n,showErrorToast:r}=k(),o=F({schema:V,defaultValues:{user_type:null},notifications:{onSuccess:s=>n({title:s}),onError:(s,t)=>r({title:s,description:t})},transformToApi(s){return{user_ids:a,user_type:s.user_type}},fetchFn:s=>d({url:"/accounts/users/toggle-user-type/",method:"POST",formData:{user_ids:a,user_type:o.form.getValues("user_type")}})});return e.jsx(C,{formHook:o,modal:l,displayType:"dialog",getTitle:s=>"Toggle users",formName:"user-form",getSubmitButtonText:s=>"Save",children:({control:s})=>e.jsx(M,{...o.form,children:e.jsx("div",{className:"space-y-4 p-0.5 mb-6",children:e.jsx(P,{control:s,name:"user_type",render:({field:t})=>e.jsxs(D,{className:"grid grid-cols-6 items-center space-y-0 gap-x-4 gap-y-1",children:[e.jsx(H,{className:"col-span-2 text-right",children:"User Type"}),e.jsx(L,{children:e.jsx(g,{items:c,defaultValue:t.value,onValueChange:t.onChange,placeholder:"Select user type",className:"col-span-4",isControlled:!0})}),e.jsx(R,{className:"col-span-4 col-start-3"})]})})})})})}),i=x(),I=new Map([["premium_paid","bg-teal-100/30 text-teal-900 dark:text-teal-200 border-teal-200"],["free","bg-neutral-300/40 border-neutral-300"],["paid","bg-sky-200/40 text-sky-900 dark:text-sky-100 border-sky-300"]]);function z(){const a=y.useMemo(()=>[i.accessor("id",{header:"ID",meta:{filter:{type:"text",displayType:"toolbar"}},enableHiding:!1}),i.accessor("username",{header:"Username",enableSorting:!1,meta:{filter:{type:"text",displayType:"toolbar"},sizeBorderStyle:!0},cell:({row:r})=>e.jsx(f,{className:"max-w-36",children:r.getValue("username")}),enableHiding:!1}),i.accessor("email",{header:"Email",enableSorting:!1,meta:{filter:{type:"text",displayType:"toolbar"}}}),i.accessor("user_type",{header:"Payment",enableSorting:!1,cell:({row:r})=>{var t;const{user_type:o}=r.original,s=I.get(o);return e.jsx("div",{className:"flex space-x-2",children:e.jsx(N,{variant:"outline",className:v("capitalize",s),children:(t=c.find(u=>u.value===o))==null?void 0:t.label})})},meta:{filter:{type:"select",options:c,displayType:"toolbar"}}})],[]),l=h({name:"users",url:"/accounts/users",columns:a,useRowSelection:!0}),n=l.datatable.table.getSelectedRowModel();return e.jsxs(e.Fragment,{children:[e.jsxs(j,{fixed:!0,children:[e.jsx(w,{}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx(T,{}),e.jsx(S,{})]})]}),e.jsx(_,{children:e.jsx(b,{resource:l,topbar:{title:"User List",subtitle:"Manage your users and their roles here."},actions:[{id:"toggle-payment",label:"Toggle Payment",renderType:"actions-menu",callback:()=>{m.show(q,{userIds:n.rows.map(r=>r.original.id)}).then(()=>{l.query.refetch()})},disabled:n.rows.length===0,shortcutIcon:e.jsx(E,{})}]})})]})}const oe=z;export{oe as component};
